{"version":3,"sources":["../src/preflights/preflight-init.ts","../src/utils/is-safe-target.ts","../src/utils/updaters/update-css.ts","../src/utils/updaters/update-css-vars.ts","../src/utils/updaters/update-dependencies.ts","../src/utils/updaters/update-env-vars.ts","../src/utils/add-components.ts","../src/utils/create-project.ts","../src/utils/env-loader.ts","../src/utils/file-helper.ts","../src/utils/updaters/update-tailwind-content.ts","../src/commands/init.ts","../src/preflights/preflight-add.ts","../src/utils/update-app-index.ts","../src/commands/add.ts","../src/preflights/preflight-build.ts","../src/commands/build.ts","../src/commands/diff.ts","../src/commands/info.ts","../src/commands/mcp.ts","../src/migrations/migrate-icons.ts","../src/migrations/migrate-radix.ts","../src/preflights/preflight-migrate.ts","../src/commands/migrate.ts","../src/preflights/preflight-registry.ts","../src/commands/registry/build.ts","../src/commands/registry/mcp.ts","../src/commands/search.ts","../src/commands/view.ts","../package.json","../src/index.ts"],"names":["preFlightInit","options","errors","fs","path","projectSpinner","spinner","logger","highlighter","frameworkSpinner","projectInfo","getProjectInfo","tailwindSpinnerMessage","tailwindSpinner","tsConfigSpinner","isSafeTarget","targetPath","cwd","decodedPath","prevPath","normalizedTarget","normalizedRoot","hasPathTraversal","cleanPath","cleanTarget","cleanDecoded","pattern","resolvedPath","updateCss","css","config","cssFilepath","cssFilepathRelative","cssSpinner","raw","output","transformCss","input","plugins","updateCssPlugin","postcss","root","selector","properties","atRuleMatch","name","params","node","pluginRule","importNodes","pluginNodes","lastPlugin","lastImport","themeInline","keyframesRule","step","stepProps","processRule","utilityAtRule","prop","value","existingDecl","decl","atRule","processAtRule","childSelector","childProps","nestedMatch","nestedName","nestedParams","tempRule","rule","clone","error","parent","nestedSelector","updateCssVars","cssVars","cssVarsSpinner","transformCssVars","updateCssVarsPlugin","cleanupDefaultNextStylesPlugin","packageInfo","getPackageInfo","addCustomImport","addCustomVariant","updateCssVarsPluginV4","updateThemePlugin","updateTailwindConfigPlugin","updateTailwindConfigAnimationPlugin","updateTailwindConfigKeyframesPlugin","updateBaseLayerPlugin","tailwindVersion","requiredRules","baseLayer","apply","applyRule","AtRule","key","vars","addOrUpdateVars","removeConflictVars","rootRule","propsToRemove","bodyRule","darkRootRule","ruleNode","newDecl","themeNode","upsertThemeNode","isLocalHSLValue","variables","themeVarNodes","variable","radiusVariables","cssVarNode","isColorValue","propValue","variantNode","customVariantNode","importNode","tailwindConfig","quote","getQuoteType","lastPluginNode","plugin","pluginName","pluginNode","existingKeyFrameNodes","keyframeValueSchema","z","keyframeName","keyframeValue","parsedKeyframeValue","keyframeNode","values","existingAnimationNodes","parsedAnimationValue","animationNode","chunks","chunk","updateDependencies","dependencies","devDependencies","dependenciesSpinner","packageManager","getUpdateDependenciesPackageManager","flag","shouldPromptForNpmFlag","confirmation","prompts","installWithPackageManager","hasReact19","hasReactDayPicker8","getPackageManager","installWithNpm","installWithDeno","installWithExpo","execa","dep","updateEnvVars","envVars","envSpinner","projectRoot","envFilePath","existingEnvFile","findExistingEnvFile","envFileExists","existsSync","envFileName","newEnvContent","envVarsAdded","envFileUpdated","envFileCreated","existingContent","mergedContent","mergeEnvContent","getNewEnvKeys","addComponents","components","workspaceConfig","getWorkspaceConfig","addWorkspaceComponents","addProjectComponents","registrySpinner","tree","resolveRegistryTree","configWithDefaults","handleError","validateFilesTarget","getProjectTailwindVersionFromConfig","updateTailwindConfig","overwriteCssVars","shouldOverwriteCssVars","updateFiles","filesCreated","filesUpdated","filesSkipped","rootSpinner","mainTargetConfig","workspaceRoot","findCommonRoot","filesByType","file","type","typeFiles","targetConfig","typeWorkspaceRoot","packageRoot","findPackageRoot","files","result","getRegistryItems","registryItemSchema","component","MONOREPO_TEMPLATE_URL","TEMPLATES","createProject","template","projectName","nextVersion","isRemoteComponent","fetchRegistry","meta","projectPath","createNextProject","createMonorepoProject","createSpinner","args","templatePath","os","response","tarPath","extractedPath","loadEnvFiles","envFiles","envFile","envPath","join","FILE_BACKUP_SUFFIX","createFileBackup","filePath","fsExtra","backupPath","restoreFileBackup","deleteFileBackup","updateTailwindContent","content","tailwindFileRelativePath","transformTailwindContent","sourceFile","_createSourceFile","configObject","SyntaxKind","property","addTailwindConfigContent","quoteChar","_getQuoteChar","existingProperty","newProperty","initializer","contentItem","newValue","element","code","initOptionsSchema","val","BASE_COLORS","color","init","Command","opts","shadowConfig","componentsJsonPath","existingConfig","rawConfigSchema","buildUrlAndHeadersForRegistryItem","item","runInit","clearRegistryContext","newProjectTemplate","preflight","getConfig","projectConfig","getProjectConfig","promptForMinimalConfig","promptForConfig","proceed","componentSpinner","registries","merged","deepmerge","fullConfig","resolveConfigPaths","defaultConfig","styles","baseColors","getRegistryStyles","getRegistryBaseColors","style","DEFAULT_TAILWIND_CSS","DEFAULT_TAILWIND_CONFIG","DEFAULT_COMPONENTS","DEFAULT_UTILS","baseColor","cssVariables","preFlightAdd","updateAppIndex","indexPath","registryItem","addOptionsSchema","add","initialConfig","createConfig","itemType","isUniversalRegistryItem","confirm","promptForRegistryComponents","deprecatedComponents","DEPRECATED_COMPONENTS","shouldUpdateAppIndex","registryIndex","getShadcnRegistryIndex","entry","c","preFlightBuild","resolvePaths","buildOptionsSchema","build","registry","ce","H","registrySchema","buildSpinner","updateOptionsSchema","diff","targetDir","projectComponents","componentsWithUpdates","changes","diffComponent","change","printDiff","payload","fetchTree","getRegistryBaseColor","getItemTargetPath","fileContent","registryContent","transform","patch","diffLines","part","info","SHADCN_MCP_VERSION","CLIENTS","DEPENDENCIES","mcp","transport","StdioServerTransport","server","mcpInitOptionsSchema","command","client","configSpinner","configPath","runMcpInit","installCommand","devFlag","installSpinner","overwriteMerge","_","sourceArray","clientInfo","mergedConfig","dir","migrateIcons","uiPath","registryIcons","fg","getRegistryIcons","libraryChoices","ICON_LIBRARIES","iconLibrary","migrateOptions","sourceLibrary","targetLibrary","migrationSpinner","migrateIconsFile","iconsMapping","sourceLibraryImport","targetLibraryImport","tmpdir","project","Project","tempFile","randomBytes","ScriptKind","targetedIcons","importDeclaration","specifier","iconName","targetedIcon","icon","toPascalCase","str","processNamedImports","namedImports","isTypeOnly","imports","packageName","namedImportList","importItem","inlineTypeMatch","aliasMatch","importName","importAlias","migrateRadix","foundPackages","replacedPackages","migrateRadixFile","pkg","packageSpinner","packageJson","foundPackagesArray","dependencyTypes","depType","packageJsonPath","radixImportPattern","linesToRemove","quoteStyle","hasSemicolon","match","fullMatch","typeKeyword","namespaceAlias","semicolon","componentName","uniqueImports","index","self","i","unifiedImport","imp","typePrefix","acc","line","transformedLine","offset","string","beforeMatch","openQuotes","openSingleQuotes","uniqueReplacedPackages","preFlightMigrate","migrations","migrateOptionsSchema","migration","migrate","preFlightRegistryBuild","buildRegistry","oe","resolvedRegistry","resolveRegistryItems","t","d","absPath","err","results","recursivelyResolveFileImports","f","searchOptionsSchema","search","partialConfig","validateRegistryConfigForItems","searchRegistries","viewOptionsSchema","view","items","package_default","main","program"],"mappings":"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","file":"index.js","sourcesContent":["import path from \"path\"\nimport { initOptionsSchema } from \"@/src/commands/init\"\nimport * as ERRORS from \"@/src/utils/errors\"\nimport { getProjectInfo } from \"@/src/utils/get-project-info\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { logger } from \"@/src/utils/logger\"\nimport { spinner } from \"@/src/utils/spinner\"\nimport fs from \"fs-extra\"\nimport { z } from \"zod\"\n\nexport async function preFlightInit(\n  options: z.infer<typeof initOptionsSchema>\n) {\n  const errors: Record<string, boolean> = {}\n\n  // Ensure target directory exists.\n  // Check for empty project. We assume if no package.json exists, the project is empty.\n  if (\n    !fs.existsSync(options.cwd) ||\n    !fs.existsSync(path.resolve(options.cwd, \"package.json\"))\n  ) {\n    errors[ERRORS.MISSING_DIR_OR_EMPTY_PROJECT] = true\n    return {\n      errors,\n      projectInfo: null,\n    }\n  }\n\n  const projectSpinner = spinner(`Preflight checks.`, {\n    silent: options.silent,\n  }).start()\n\n  if (\n    fs.existsSync(path.resolve(options.cwd, \"components.json\")) &&\n    !options.force\n  ) {\n    projectSpinner?.fail()\n    logger.break()\n    logger.error(\n      `A ${highlighter.info(\n        \"components.json\"\n      )} file already exists at ${highlighter.info(\n        options.cwd\n      )}.\\nTo start over, remove the ${highlighter.info(\n        \"components.json\"\n      )} file and run ${highlighter.info(\"init\")} again.`\n    )\n    logger.break()\n    process.exit(1)\n  }\n\n  projectSpinner?.succeed()\n\n  const frameworkSpinner = spinner(`Verifying framework.`, {\n    silent: options.silent,\n  }).start()\n  const projectInfo = await getProjectInfo(options.cwd)\n  if (!projectInfo || projectInfo?.framework.name === \"manual\") {\n    errors[ERRORS.UNSUPPORTED_FRAMEWORK] = true\n    frameworkSpinner?.fail()\n    logger.break()\n    if (projectInfo?.framework.links.installation) {\n      logger.error(\n        `We could not detect a supported framework at ${highlighter.info(\n          options.cwd\n        )}.\\n` +\n          `Visit ${highlighter.info(\n            projectInfo?.framework.links.installation\n          )} to manually configure your project.\\nOnce configured, you can use the cli to add components.`\n      )\n    }\n    logger.break()\n    process.exit(1)\n  }\n  frameworkSpinner?.succeed(\n    `Verifying framework. Found ${highlighter.info(\n      projectInfo.framework.label\n    )}.`\n  )\n\n  let tailwindSpinnerMessage = \"Validating Tailwind CSS.\"\n\n  if (projectInfo.tailwindVersion === \"v4\") {\n    tailwindSpinnerMessage = `Validating Tailwind CSS config. Found ${highlighter.info(\n      \"v4\"\n    )}.`\n  }\n\n  const tailwindSpinner = spinner(tailwindSpinnerMessage, {\n    silent: options.silent,\n  }).start()\n  if (\n    projectInfo.tailwindVersion === \"v3\" &&\n    (!projectInfo?.tailwindConfigFile || !projectInfo?.tailwindCssFile)\n  ) {\n    errors[ERRORS.TAILWIND_NOT_CONFIGURED] = true\n    tailwindSpinner?.fail()\n  } else if (\n    projectInfo.tailwindVersion === \"v4\" &&\n    !projectInfo?.tailwindCssFile\n  ) {\n    errors[ERRORS.TAILWIND_NOT_CONFIGURED] = true\n    tailwindSpinner?.fail()\n  } else if (!projectInfo.tailwindVersion) {\n    errors[ERRORS.TAILWIND_NOT_CONFIGURED] = true\n    tailwindSpinner?.fail()\n  } else {\n    tailwindSpinner?.succeed()\n  }\n\n  const tsConfigSpinner = spinner(`Validating import alias.`, {\n    silent: options.silent,\n  }).start()\n  if (!projectInfo?.aliasPrefix) {\n    errors[ERRORS.IMPORT_ALIAS_MISSING] = true\n    tsConfigSpinner?.fail()\n  } else {\n    tsConfigSpinner?.succeed()\n  }\n\n  if (Object.keys(errors).length > 0) {\n    if (errors[ERRORS.TAILWIND_NOT_CONFIGURED]) {\n      logger.break()\n      logger.error(\n        `No Tailwind CSS configuration found at ${highlighter.info(\n          options.cwd\n        )}.`\n      )\n      logger.error(\n        `It is likely you do not have Tailwind CSS installed or have an invalid configuration.`\n      )\n      logger.error(`Install Tailwind CSS then try again.`)\n      if (projectInfo?.framework.links.tailwind) {\n        logger.error(\n          `Visit ${highlighter.info(\n            projectInfo?.framework.links.tailwind\n          )} to get started.`\n        )\n      }\n    }\n\n    if (errors[ERRORS.IMPORT_ALIAS_MISSING]) {\n      logger.break()\n      logger.error(`No import alias found in your tsconfig.json file.`)\n      if (projectInfo?.framework.links.installation) {\n        logger.error(\n          `Visit ${highlighter.info(\n            projectInfo?.framework.links.installation\n          )} to learn how to set an import alias.`\n        )\n      }\n    }\n\n    logger.break()\n    process.exit(1)\n  }\n\n  return {\n    errors,\n    projectInfo,\n  }\n}\n","import path from \"path\"\n\nexport function isSafeTarget(targetPath: string, cwd: string): boolean {\n  // Check for null bytes which can be used to bypass validations.\n  if (targetPath.includes(\"\\0\")) {\n    return false\n  }\n\n  // Decode URL-encoded sequences to catch encoded traversal attempts.\n  let decodedPath: string\n  try {\n    // Decode multiple times to catch double-encoded sequences.\n    decodedPath = targetPath\n    let prevPath = \"\"\n    while (decodedPath !== prevPath && decodedPath.includes(\"%\")) {\n      prevPath = decodedPath\n      decodedPath = decodeURIComponent(decodedPath)\n    }\n  } catch {\n    // If decoding fails, treat as unsafe.\n    return false\n  }\n\n  // Normalize both paths to handle different path separators.\n  // Convert Windows backslashes to forward slashes for consistent handling.\n  const normalizedTarget = path.normalize(decodedPath.replace(/\\\\/g, \"/\"))\n  const normalizedRoot = path.normalize(cwd)\n\n  // Check for explicit path traversal sequences in both encoded and decoded forms.\n  // Allow [...] pattern which is common in framework routing (e.g., [...slug])\n  const hasPathTraversal = (path: string) => {\n    // Remove [...] patterns before checking for ..\n    const withoutBrackets = path.replace(/\\[\\.\\.\\..*?\\]/g, \"\")\n    return withoutBrackets.includes(\"..\")\n  }\n\n  if (\n    hasPathTraversal(normalizedTarget) ||\n    hasPathTraversal(decodedPath) ||\n    hasPathTraversal(targetPath)\n  ) {\n    return false\n  }\n\n  // Check for current directory references that might be used in traversal.\n  // First, remove [...] patterns to avoid false positives\n  const cleanPath = (path: string) => path.replace(/\\[\\.\\.\\..*?\\]/g, \"\")\n  const cleanTarget = cleanPath(targetPath)\n  const cleanDecoded = cleanPath(decodedPath)\n\n  const suspiciousPatterns = [\n    /\\.\\.[\\/\\\\]/, // ../ or ..\\\n    /[\\/\\\\]\\.\\./, // /.. or \\..\n    /\\.\\./, // .. anywhere\n    /\\.\\.%/, // URL encoded traversal\n    /\\x00/, // null byte\n    /[\\x01-\\x1f]/, // control characters\n  ]\n\n  if (\n    suspiciousPatterns.some(\n      (pattern) => pattern.test(cleanTarget) || pattern.test(cleanDecoded)\n    )\n  ) {\n    return false\n  }\n\n  // Allow ~/ at the start (home directory expansion within project) but reject ~/../ patterns.\n  if (\n    (targetPath.includes(\"~\") || decodedPath.includes(\"~\")) &&\n    (targetPath.includes(\"../\") || decodedPath.includes(\"../\"))\n  ) {\n    return false\n  }\n\n  // Check for Windows drive letters (even on non-Windows systems for safety).\n  const driveLetterRegex = /^[a-zA-Z]:[\\/\\\\]/\n  if (driveLetterRegex.test(decodedPath)) {\n    // On Windows, check if it starts with the project root.\n    if (process.platform === \"win32\") {\n      return decodedPath.toLowerCase().startsWith(cwd.toLowerCase())\n    }\n    // On non-Windows systems, reject all Windows absolute paths.\n    return false\n  }\n\n  // If it's an absolute path, ensure it's within the project root.\n  if (path.isAbsolute(normalizedTarget)) {\n    return normalizedTarget.startsWith(normalizedRoot + path.sep)\n  }\n\n  // For relative paths, resolve and check if within project bounds.\n  const resolvedPath = path.resolve(normalizedRoot, normalizedTarget)\n  return (\n    resolvedPath.startsWith(normalizedRoot + path.sep) ||\n    resolvedPath === normalizedRoot\n  )\n}\n","import { promises as fs } from \"fs\"\nimport path from \"path\"\nimport { registryItemCssSchema } from \"@/src/schema\"\nimport { Config } from \"@/src/utils/get-config\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { spinner } from \"@/src/utils/spinner\"\nimport postcss from \"postcss\"\nimport AtRule from \"postcss/lib/at-rule\"\nimport Declaration from \"postcss/lib/declaration\"\nimport Root from \"postcss/lib/root\"\nimport Rule from \"postcss/lib/rule\"\nimport { z } from \"zod\"\n\nexport async function updateCss(\n  css: z.infer<typeof registryItemCssSchema> | undefined,\n  config: Config,\n  options: {\n    silent?: boolean\n  }\n) {\n  if (\n    !config.resolvedPaths.tailwindCss ||\n    !css ||\n    Object.keys(css).length === 0\n  ) {\n    return\n  }\n\n  options = {\n    silent: false,\n    ...options,\n  }\n\n  const cssFilepath = config.resolvedPaths.tailwindCss\n  const cssFilepathRelative = path.relative(\n    config.resolvedPaths.cwd,\n    cssFilepath\n  )\n  const cssSpinner = spinner(\n    `Updating ${highlighter.info(cssFilepathRelative)}`,\n    {\n      silent: options.silent,\n    }\n  ).start()\n\n  const raw = await fs.readFile(cssFilepath, \"utf8\")\n  let output = await transformCss(raw, css)\n  await fs.writeFile(cssFilepath, output, \"utf8\")\n  cssSpinner.succeed()\n}\n\nexport async function transformCss(\n  input: string,\n  css: z.infer<typeof registryItemCssSchema>\n) {\n  const plugins = [updateCssPlugin(css)]\n\n  const result = await postcss(plugins).process(input, {\n    from: undefined,\n  })\n\n  let output = result.css\n  output = output.replace(/\\/\\* ---break--- \\*\\//g, \"\")\n  output = output.replace(/(\\n\\s*\\n)+/g, \"\\n\\n\")\n  output = output.trimEnd()\n\n  return output\n}\n\nfunction updateCssPlugin(css: z.infer<typeof registryItemCssSchema>) {\n  return {\n    postcssPlugin: \"update-css\",\n    Once(root: Root) {\n      for (const [selector, properties] of Object.entries(css)) {\n        if (selector.startsWith(\"@\")) {\n          // Handle at-rules (@layer, @utility, etc.)\n          const atRuleMatch = selector.match(/@([a-zA-Z-]+)\\s*(.*)/)\n          if (!atRuleMatch) continue\n\n          const [, name, params] = atRuleMatch\n\n          // Special handling for plugins - place them after imports\n          if (name === \"plugin\") {\n            // Find existing plugin with same params\n            const existingPlugin = root.nodes?.find(\n              (node): node is AtRule =>\n                node.type === \"atrule\" &&\n                node.name === \"plugin\" &&\n                node.params === params\n            )\n\n            if (!existingPlugin) {\n              const pluginRule = postcss.atRule({\n                name: \"plugin\",\n                params,\n                raws: { semicolon: true, before: \"\\n\" },\n              })\n\n              // Find the last import or plugin node to insert after\n              const importNodes = root.nodes?.filter(\n                (node): node is AtRule =>\n                  node.type === \"atrule\" && node.name === \"import\"\n              )\n\n              const pluginNodes = root.nodes?.filter(\n                (node): node is AtRule =>\n                  node.type === \"atrule\" && node.name === \"plugin\"\n              )\n\n              if (pluginNodes && pluginNodes.length > 0) {\n                // Insert after the last existing plugin\n                const lastPlugin = pluginNodes[pluginNodes.length - 1]\n                root.insertAfter(lastPlugin, pluginRule)\n              } else if (importNodes && importNodes.length > 0) {\n                // Insert after the last import if no plugins exist\n                const lastImport = importNodes[importNodes.length - 1]\n                root.insertAfter(lastImport, pluginRule)\n                // Add a break comment before the first plugin to create spacing\n                root.insertBefore(\n                  pluginRule,\n                  postcss.comment({ text: \"---break---\" })\n                )\n                // Add a break comment after the plugin for spacing from other content\n                root.insertAfter(\n                  pluginRule,\n                  postcss.comment({ text: \"---break---\" })\n                )\n              } else {\n                // If no imports or plugins, insert at the beginning\n                root.prepend(pluginRule)\n                // Add a break comment before the first plugin for spacing\n                root.insertBefore(\n                  pluginRule,\n                  postcss.comment({ text: \"---break---\" })\n                )\n                // Add a break comment after the plugin for spacing from other content\n                root.insertAfter(\n                  pluginRule,\n                  postcss.comment({ text: \"---break---\" })\n                )\n              }\n            }\n          }\n          // Special handling for keyframes - place them under @theme inline\n          else if (name === \"keyframes\") {\n            let themeInline = root.nodes?.find(\n              (node): node is AtRule =>\n                node.type === \"atrule\" &&\n                node.name === \"theme\" &&\n                node.params === \"inline\"\n            ) as AtRule | undefined\n\n            if (!themeInline) {\n              themeInline = postcss.atRule({\n                name: \"theme\",\n                params: \"inline\",\n                raws: { semicolon: true, between: \" \", before: \"\\n\" },\n              })\n              root.append(themeInline)\n              root.insertBefore(\n                themeInline,\n                postcss.comment({ text: \"---break---\" })\n              )\n            }\n\n            const keyframesRule = postcss.atRule({\n              name: \"keyframes\",\n              params,\n              raws: { semicolon: true, between: \" \", before: \"\\n  \" },\n            })\n\n            themeInline.append(keyframesRule)\n\n            if (typeof properties === \"object\") {\n              for (const [step, stepProps] of Object.entries(properties)) {\n                processRule(keyframesRule, step, stepProps)\n              }\n            }\n          }\n          // Special handling for utility classes to preserve property values\n          else if (name === \"utility\") {\n            const utilityAtRule = root.nodes?.find(\n              (node): node is AtRule =>\n                node.type === \"atrule\" &&\n                node.name === name &&\n                node.params === params\n            ) as AtRule | undefined\n\n            if (!utilityAtRule) {\n              const atRule = postcss.atRule({\n                name,\n                params,\n                raws: { semicolon: true, between: \" \", before: \"\\n\" },\n              })\n\n              root.append(atRule)\n              root.insertBefore(\n                atRule,\n                postcss.comment({ text: \"---break---\" })\n              )\n\n              // Add declarations with their values preserved\n              if (typeof properties === \"object\") {\n                for (const [prop, value] of Object.entries(properties)) {\n                  if (typeof value === \"string\") {\n                    const decl = postcss.decl({\n                      prop,\n                      value: value,\n                      raws: { semicolon: true, before: \"\\n    \" },\n                    })\n                    atRule.append(decl)\n                  } else if (typeof value === \"object\") {\n                    processRule(atRule, prop, value)\n                  }\n                }\n              }\n            } else {\n              // Update existing utility class\n              if (typeof properties === \"object\") {\n                for (const [prop, value] of Object.entries(properties)) {\n                  if (typeof value === \"string\") {\n                    const existingDecl = utilityAtRule.nodes?.find(\n                      (node): node is Declaration =>\n                        node.type === \"decl\" && node.prop === prop\n                    )\n\n                    const decl = postcss.decl({\n                      prop,\n                      value: value,\n                      raws: { semicolon: true, before: \"\\n    \" },\n                    })\n\n                    existingDecl\n                      ? existingDecl.replaceWith(decl)\n                      : utilityAtRule.append(decl)\n                  } else if (typeof value === \"object\") {\n                    processRule(utilityAtRule, prop, value)\n                  }\n                }\n              }\n            }\n          } else {\n            // Handle other at-rules normally\n            processAtRule(root, name, params, properties)\n          }\n        } else {\n          // Handle regular CSS rules\n          processRule(root, selector, properties)\n        }\n      }\n    },\n  }\n}\n\nfunction processAtRule(\n  root: Root | AtRule,\n  name: string,\n  params: string,\n  properties: any\n) {\n  // Find or create the at-rule\n  let atRule = root.nodes?.find(\n    (node): node is AtRule =>\n      node.type === \"atrule\" && node.name === name && node.params === params\n  ) as AtRule | undefined\n\n  if (!atRule) {\n    atRule = postcss.atRule({\n      name,\n      params,\n      raws: { semicolon: true, between: \" \", before: \"\\n\" },\n    })\n    root.append(atRule)\n    root.insertBefore(atRule, postcss.comment({ text: \"---break---\" }))\n  }\n\n  // Process children of this at-rule\n  if (typeof properties === \"object\") {\n    for (const [childSelector, childProps] of Object.entries(properties)) {\n      if (childSelector.startsWith(\"@\")) {\n        // Nested at-rule\n        const nestedMatch = childSelector.match(/@([a-zA-Z-]+)\\s*(.*)/)\n        if (nestedMatch) {\n          const [, nestedName, nestedParams] = nestedMatch\n          processAtRule(atRule, nestedName, nestedParams, childProps)\n        }\n      } else {\n        // CSS rule within at-rule\n        processRule(atRule, childSelector, childProps)\n      }\n    }\n  } else if (typeof properties === \"string\") {\n    // Direct string content for the at-rule\n    try {\n      // Parse the CSS string with PostCSS\n      const parsed = postcss.parse(`.temp{${properties}}`)\n      const tempRule = parsed.first as Rule\n\n      if (tempRule && tempRule.nodes) {\n        // Create a rule for the at-rule if needed\n        const rule = postcss.rule({\n          selector: \"temp\",\n          raws: { semicolon: true, between: \" \", before: \"\\n  \" },\n        })\n\n        // Copy all declarations from the temp rule to our actual rule\n        tempRule.nodes.forEach((node) => {\n          if (node.type === \"decl\") {\n            const clone = node.clone()\n            clone.raws.before = \"\\n    \"\n            rule.append(clone)\n          }\n        })\n\n        // Only add the rule if it has declarations\n        if (rule.nodes?.length) {\n          atRule.append(rule)\n        }\n      }\n    } catch (error) {\n      console.error(\"Error parsing at-rule content:\", properties, error)\n      throw error\n    }\n  }\n}\n\nfunction processRule(parent: Root | AtRule, selector: string, properties: any) {\n  let rule = parent.nodes?.find(\n    (node): node is Rule => node.type === \"rule\" && node.selector === selector\n  ) as Rule | undefined\n\n  if (!rule) {\n    rule = postcss.rule({\n      selector,\n      raws: { semicolon: true, between: \" \", before: \"\\n  \" },\n    })\n    parent.append(rule)\n  }\n\n  if (typeof properties === \"object\") {\n    for (const [prop, value] of Object.entries(properties)) {\n      if (typeof value === \"string\") {\n        const decl = postcss.decl({\n          prop,\n          value: value,\n          raws: { semicolon: true, before: \"\\n    \" },\n        })\n\n        // Replace existing property or add new one\n        const existingDecl = rule.nodes?.find(\n          (node): node is Declaration =>\n            node.type === \"decl\" && node.prop === prop\n        )\n\n        existingDecl ? existingDecl.replaceWith(decl) : rule.append(decl)\n      } else if (typeof value === \"object\") {\n        // Nested selector (including & selectors)\n        const nestedSelector = prop.startsWith(\"&\")\n          ? selector.replace(/^([^:]+)/, `$1${prop.substring(1)}`)\n          : prop // Use the original selector for other nested elements\n        processRule(parent, nestedSelector, value)\n      }\n    }\n  } else if (typeof properties === \"string\") {\n    // Direct string content for the rule\n    try {\n      // Parse the CSS string with PostCSS\n      const parsed = postcss.parse(`.temp{${properties}}`)\n      const tempRule = parsed.first as Rule\n\n      if (tempRule && tempRule.nodes) {\n        // Copy all declarations from the temp rule to our actual rule\n        tempRule.nodes.forEach((node) => {\n          if (node.type === \"decl\") {\n            const clone = node.clone()\n            clone.raws.before = \"\\n    \"\n            rule?.append(clone)\n          }\n        })\n      }\n    } catch (error) {\n      console.error(\"Error parsing rule content:\", selector, properties, error)\n      throw error\n    }\n  }\n}\n","import { promises as fs } from \"fs\"\nimport path from \"path\"\nimport {\n  registryItemCssVarsSchema,\n  registryItemTailwindSchema,\n} from \"@/src/schema\"\nimport { Config } from \"@/src/utils/get-config\"\nimport { getPackageInfo } from \"@/src/utils/get-package-info\"\nimport { TailwindVersion } from \"@/src/utils/get-project-info\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { spinner } from \"@/src/utils/spinner\"\nimport postcss from \"postcss\"\nimport AtRule from \"postcss/lib/at-rule\"\nimport Root from \"postcss/lib/root\"\nimport Rule from \"postcss/lib/rule\"\nimport { z } from \"zod\"\n\nexport async function updateCssVars(\n  cssVars: z.infer<typeof registryItemCssVarsSchema> | undefined,\n  config: Config,\n  options: {\n    cleanupDefaultNextStyles?: boolean\n    overwriteCssVars?: boolean\n    initIndex?: boolean\n    silent?: boolean\n    tailwindVersion?: TailwindVersion\n    tailwindConfig?: z.infer<typeof registryItemTailwindSchema>[\"config\"]\n  }\n) {\n  if (!config.resolvedPaths.tailwindCss || !Object.keys(cssVars ?? {}).length) {\n    return\n  }\n\n  options = {\n    cleanupDefaultNextStyles: false,\n    silent: false,\n    tailwindVersion: \"v3\",\n    overwriteCssVars: false,\n    initIndex: true,\n    ...options,\n  }\n  const cssFilepath = config.resolvedPaths.tailwindCss\n  const cssFilepathRelative = path.relative(\n    config.resolvedPaths.cwd,\n    cssFilepath\n  )\n  const cssVarsSpinner = spinner(\n    `Updating CSS variables in ${highlighter.info(cssFilepathRelative)}`,\n    {\n      silent: options.silent,\n    }\n  ).start()\n  const raw = await fs.readFile(cssFilepath, \"utf8\")\n  let output = await transformCssVars(raw, cssVars ?? {}, config, {\n    cleanupDefaultNextStyles: options.cleanupDefaultNextStyles,\n    tailwindVersion: options.tailwindVersion,\n    tailwindConfig: options.tailwindConfig,\n    overwriteCssVars: options.overwriteCssVars,\n    initIndex: options.initIndex,\n  })\n  await fs.writeFile(cssFilepath, output, \"utf8\")\n  cssVarsSpinner.succeed()\n}\n\nexport async function transformCssVars(\n  input: string,\n  cssVars: z.infer<typeof registryItemCssVarsSchema>,\n  config: Config,\n  options: {\n    cleanupDefaultNextStyles?: boolean\n    tailwindVersion?: TailwindVersion\n    tailwindConfig?: z.infer<typeof registryItemTailwindSchema>[\"config\"]\n    overwriteCssVars?: boolean\n    initIndex?: boolean\n  } = {\n    cleanupDefaultNextStyles: false,\n    tailwindVersion: \"v3\",\n    tailwindConfig: undefined,\n    overwriteCssVars: false,\n    initIndex: true,\n  }\n) {\n  options = {\n    cleanupDefaultNextStyles: false,\n    tailwindVersion: \"v3\",\n    tailwindConfig: undefined,\n    overwriteCssVars: false,\n    initIndex: true,\n    ...options,\n  }\n\n  let plugins = [updateCssVarsPlugin(cssVars)]\n\n  if (options.cleanupDefaultNextStyles) {\n    plugins.push(cleanupDefaultNextStylesPlugin())\n  }\n\n  if (options.tailwindVersion === \"v4\") {\n    plugins = []\n\n    // Only add tw-animate-css if project does not have tailwindcss-animate\n    if (config.resolvedPaths?.cwd) {\n      const packageInfo = getPackageInfo(config.resolvedPaths.cwd)\n      if (\n        !packageInfo?.dependencies?.[\"tailwindcss-animate\"] &&\n        !packageInfo?.devDependencies?.[\"tailwindcss-animate\"] &&\n        options.initIndex\n      ) {\n        plugins.push(addCustomImport({ params: \"tw-animate-css\" }))\n      }\n    }\n\n    plugins.push(addCustomVariant({ params: \"dark (&:is(.dark *))\" }))\n\n    if (options.cleanupDefaultNextStyles) {\n      plugins.push(cleanupDefaultNextStylesPlugin())\n    }\n\n    plugins.push(\n      updateCssVarsPluginV4(cssVars, {\n        overwriteCssVars: options.overwriteCssVars,\n      })\n    )\n    plugins.push(updateThemePlugin(cssVars))\n\n    if (options.tailwindConfig) {\n      plugins.push(updateTailwindConfigPlugin(options.tailwindConfig))\n      plugins.push(updateTailwindConfigAnimationPlugin(options.tailwindConfig))\n      plugins.push(updateTailwindConfigKeyframesPlugin(options.tailwindConfig))\n    }\n  }\n\n  if (config.tailwind.cssVariables && options.initIndex) {\n    plugins.push(\n      updateBaseLayerPlugin({ tailwindVersion: options.tailwindVersion })\n    )\n  }\n\n  const result = await postcss(plugins).process(input, {\n    from: undefined,\n  })\n\n  let output = result.css\n\n  output = output.replace(/\\/\\* ---break--- \\*\\//g, \"\")\n\n  if (options.tailwindVersion === \"v4\") {\n    output = output.replace(/(\\n\\s*\\n)+/g, \"\\n\\n\")\n  }\n\n  return output\n}\n\nfunction updateBaseLayerPlugin({\n  tailwindVersion,\n}: {\n  tailwindVersion?: TailwindVersion\n}) {\n  return {\n    postcssPlugin: \"update-base-layer\",\n    Once(root: Root) {\n      const requiredRules = [\n        {\n          selector: \"*\",\n          apply:\n            tailwindVersion === \"v4\"\n              ? \"border-border outline-ring/50\"\n              : \"border-border\",\n        },\n        { selector: \"body\", apply: \"bg-background text-foreground\" },\n      ]\n\n      let baseLayer = root.nodes.find(\n        (node): node is AtRule =>\n          node.type === \"atrule\" &&\n          node.name === \"layer\" &&\n          node.params === \"base\" &&\n          requiredRules.every(({ selector, apply }) =>\n            node.nodes?.some(\n              (rule): rule is Rule =>\n                rule.type === \"rule\" &&\n                rule.selector === selector &&\n                rule.nodes.some(\n                  (applyRule): applyRule is AtRule =>\n                    applyRule.type === \"atrule\" &&\n                    applyRule.name === \"apply\" &&\n                    applyRule.params === apply\n                )\n            )\n          )\n      ) as AtRule | undefined\n\n      if (!baseLayer) {\n        baseLayer = postcss.atRule({\n          name: \"layer\",\n          params: \"base\",\n          raws: { semicolon: true, between: \" \", before: \"\\n\" },\n        })\n        root.append(baseLayer)\n        root.insertBefore(baseLayer, postcss.comment({ text: \"---break---\" }))\n      }\n\n      requiredRules.forEach(({ selector, apply }) => {\n        const existingRule = baseLayer?.nodes?.find(\n          (node): node is Rule =>\n            node.type === \"rule\" && node.selector === selector\n        )\n\n        if (!existingRule) {\n          baseLayer?.append(\n            postcss.rule({\n              selector,\n              nodes: [\n                postcss.atRule({\n                  name: \"apply\",\n                  params: apply,\n                  raws: { semicolon: true, before: \"\\n    \" },\n                }),\n              ],\n              raws: { semicolon: true, between: \" \", before: \"\\n  \" },\n            })\n          )\n        }\n      })\n    },\n  }\n}\n\nfunction updateCssVarsPlugin(\n  cssVars: z.infer<typeof registryItemCssVarsSchema>\n) {\n  return {\n    postcssPlugin: \"update-css-vars\",\n    Once(root: Root) {\n      let baseLayer = root.nodes.find(\n        (node) =>\n          node.type === \"atrule\" &&\n          node.name === \"layer\" &&\n          node.params === \"base\"\n      ) as AtRule | undefined\n\n      if (!(baseLayer instanceof AtRule)) {\n        baseLayer = postcss.atRule({\n          name: \"layer\",\n          params: \"base\",\n          nodes: [],\n          raws: {\n            semicolon: true,\n            before: \"\\n\",\n            between: \" \",\n          },\n        })\n        root.append(baseLayer)\n        root.insertBefore(baseLayer, postcss.comment({ text: \"---break---\" }))\n      }\n\n      if (baseLayer !== undefined) {\n        // Add variables for each key in cssVars\n        Object.entries(cssVars).forEach(([key, vars]) => {\n          const selector = key === \"light\" ? \":root\" : `.${key}`\n          // TODO: Fix typecheck.\n          addOrUpdateVars(baseLayer as AtRule, selector, vars)\n        })\n      }\n    },\n  }\n}\n\nfunction removeConflictVars(root: Rule | Root) {\n  const rootRule = root.nodes.find(\n    (node): node is Rule => node.type === \"rule\" && node.selector === \":root\"\n  )\n\n  if (rootRule) {\n    const propsToRemove = [\"--background\", \"--foreground\"]\n\n    rootRule.nodes\n      .filter(\n        (node): node is postcss.Declaration =>\n          node.type === \"decl\" && propsToRemove.includes(node.prop)\n      )\n      .forEach((node) => node.remove())\n\n    if (rootRule.nodes.length === 0) {\n      rootRule.remove()\n    }\n  }\n}\n\nfunction cleanupDefaultNextStylesPlugin() {\n  return {\n    postcssPlugin: \"cleanup-default-next-styles\",\n    Once(root: Root) {\n      const bodyRule = root.nodes.find(\n        (node): node is Rule => node.type === \"rule\" && node.selector === \"body\"\n      )\n      if (bodyRule) {\n        // Remove color from the body node.\n        bodyRule.nodes\n          .find(\n            (node): node is postcss.Declaration =>\n              node.type === \"decl\" &&\n              node.prop === \"color\" &&\n              [\"rgb(var(--foreground-rgb))\", \"var(--foreground)\"].includes(\n                node.value\n              )\n          )\n          ?.remove()\n\n        // Remove background: linear-gradient.\n        bodyRule.nodes\n          .find((node): node is postcss.Declaration => {\n            return (\n              node.type === \"decl\" &&\n              node.prop === \"background\" &&\n              // This is only going to run on create project, so all good.\n              (node.value.startsWith(\"linear-gradient\") ||\n                node.value === \"var(--background)\")\n            )\n          })\n          ?.remove()\n\n        // Remove font-family: Arial, Helvetica, sans-serif;\n        bodyRule.nodes\n          .find(\n            (node): node is postcss.Declaration =>\n              node.type === \"decl\" &&\n              node.prop === \"font-family\" &&\n              node.value === \"Arial, Helvetica, sans-serif\"\n          )\n          ?.remove()\n\n        // If the body rule is empty, remove it.\n        if (bodyRule.nodes.length === 0) {\n          bodyRule.remove()\n        }\n      }\n\n      removeConflictVars(root)\n\n      const darkRootRule = root.nodes.find(\n        (node): node is Rule =>\n          node.type === \"atrule\" &&\n          node.params === \"(prefers-color-scheme: dark)\"\n      )\n\n      if (darkRootRule) {\n        removeConflictVars(darkRootRule)\n        if (darkRootRule.nodes.length === 0) {\n          darkRootRule.remove()\n        }\n      }\n    },\n  }\n}\n\nfunction addOrUpdateVars(\n  baseLayer: AtRule,\n  selector: string,\n  vars: Record<string, string>\n) {\n  let ruleNode = baseLayer.nodes?.find(\n    (node): node is Rule => node.type === \"rule\" && node.selector === selector\n  )\n\n  if (!ruleNode) {\n    if (Object.keys(vars).length > 0) {\n      ruleNode = postcss.rule({\n        selector,\n        raws: { between: \" \", before: \"\\n  \" },\n      })\n      baseLayer.append(ruleNode)\n    }\n  }\n\n  Object.entries(vars).forEach(([key, value]) => {\n    const prop = `--${key.replace(/^--/, \"\")}`\n    const newDecl = postcss.decl({\n      prop,\n      value,\n      raws: { semicolon: true },\n    })\n\n    const existingDecl = ruleNode?.nodes.find(\n      (node): node is postcss.Declaration =>\n        node.type === \"decl\" && node.prop === prop\n    )\n\n    existingDecl ? existingDecl.replaceWith(newDecl) : ruleNode?.append(newDecl)\n  })\n}\n\nfunction updateCssVarsPluginV4(\n  cssVars: z.infer<typeof registryItemCssVarsSchema>,\n  options: {\n    overwriteCssVars?: boolean\n  }\n) {\n  return {\n    postcssPlugin: \"update-css-vars-v4\",\n    Once(root: Root) {\n      Object.entries(cssVars).forEach(([key, vars]) => {\n        let selector = key === \"light\" ? \":root\" : `.${key}`\n\n        if (key === \"theme\") {\n          selector = \"@theme\"\n          const themeNode = upsertThemeNode(root)\n          Object.entries(vars).forEach(([key, value]) => {\n            const prop = `--${key.replace(/^--/, \"\")}`\n            const newDecl = postcss.decl({\n              prop,\n              value,\n              raws: { semicolon: true },\n            })\n\n            const existingDecl = themeNode?.nodes?.find(\n              (node): node is postcss.Declaration =>\n                node.type === \"decl\" && node.prop === prop\n            )\n\n            // Only overwrite if overwriteCssVars is true\n            // i.e for registry:theme and registry:style\n            // We do not want new components to overwrite existing vars.\n            // Keep user defined vars.\n            if (options.overwriteCssVars) {\n              if (existingDecl) {\n                existingDecl.replaceWith(newDecl)\n              } else {\n                themeNode?.append(newDecl)\n              }\n            } else {\n              if (!existingDecl) {\n                themeNode?.append(newDecl)\n              }\n            }\n          })\n          return\n        }\n\n        let ruleNode = root.nodes?.find(\n          (node): node is Rule =>\n            node.type === \"rule\" && node.selector === selector\n        )\n\n        if (!ruleNode && Object.keys(vars).length > 0) {\n          ruleNode = postcss.rule({\n            selector,\n            nodes: [],\n            raws: { semicolon: true, between: \" \", before: \"\\n\" },\n          })\n          root.append(ruleNode)\n          root.insertBefore(ruleNode, postcss.comment({ text: \"---break---\" }))\n        }\n\n        Object.entries(vars).forEach(([key, value]) => {\n          let prop = `--${key.replace(/^--/, \"\")}`\n\n          // Special case for sidebar-background.\n          if (prop === \"--sidebar-background\") {\n            prop = \"--sidebar\"\n          }\n\n          if (isLocalHSLValue(value)) {\n            value = `hsl(${value})`\n          }\n\n          const newDecl = postcss.decl({\n            prop,\n            value,\n            raws: { semicolon: true },\n          })\n          const existingDecl = ruleNode?.nodes.find(\n            (node): node is postcss.Declaration =>\n              node.type === \"decl\" && node.prop === prop\n          )\n\n          // Only overwrite if overwriteCssVars is true\n          // i.e for registry:theme and registry:style\n          // We do not want new components to overwrite existing vars.\n          // Keep user defined vars.\n          if (options.overwriteCssVars) {\n            if (existingDecl) {\n              existingDecl.replaceWith(newDecl)\n            } else {\n              ruleNode?.append(newDecl)\n            }\n          } else {\n            if (!existingDecl) {\n              ruleNode?.append(newDecl)\n            }\n          }\n        })\n      })\n    },\n  }\n}\n\nfunction updateThemePlugin(cssVars: z.infer<typeof registryItemCssVarsSchema>) {\n  return {\n    postcssPlugin: \"update-theme\",\n    Once(root: Root) {\n      // Find unique color names from light and dark.\n      const variables = Array.from(\n        new Set(\n          Object.keys(cssVars).flatMap((key) =>\n            Object.keys(cssVars[key as keyof typeof cssVars] || {})\n          )\n        )\n      )\n\n      if (!variables.length) {\n        return\n      }\n\n      const themeNode = upsertThemeNode(root)\n\n      const themeVarNodes = themeNode.nodes?.filter(\n        (node): node is postcss.Declaration =>\n          node.type === \"decl\" && node.prop.startsWith(\"--\")\n      )\n\n      for (const variable of variables) {\n        const value = Object.values(cssVars).find((vars) => vars[variable])?.[\n          variable\n        ]\n\n        if (!value) {\n          continue\n        }\n\n        if (variable === \"radius\") {\n          const radiusVariables = {\n            sm: \"calc(var(--radius) - 4px)\",\n            md: \"calc(var(--radius) - 2px)\",\n            lg: \"var(--radius)\",\n            xl: \"calc(var(--radius) + 4px)\",\n          }\n          for (const [key, value] of Object.entries(radiusVariables)) {\n            const cssVarNode = postcss.decl({\n              prop: `--radius-${key}`,\n              value,\n              raws: { semicolon: true },\n            })\n            if (\n              themeNode?.nodes?.find(\n                (node): node is postcss.Declaration =>\n                  node.type === \"decl\" && node.prop === cssVarNode.prop\n              )\n            ) {\n              continue\n            }\n            themeNode?.append(cssVarNode)\n          }\n          continue\n        }\n\n        let prop =\n          isLocalHSLValue(value) || isColorValue(value)\n            ? `--color-${variable.replace(/^--/, \"\")}`\n            : `--${variable.replace(/^--/, \"\")}`\n        if (prop === \"--color-sidebar-background\") {\n          prop = \"--color-sidebar\"\n        }\n\n        let propValue = `var(--${variable})`\n        if (prop === \"--color-sidebar\") {\n          propValue = \"var(--sidebar)\"\n        }\n\n        const cssVarNode = postcss.decl({\n          prop,\n          value: propValue,\n          raws: { semicolon: true },\n        })\n        const existingDecl = themeNode?.nodes?.find(\n          (node): node is postcss.Declaration =>\n            node.type === \"decl\" && node.prop === cssVarNode.prop\n        )\n        if (!existingDecl) {\n          if (themeVarNodes?.length) {\n            themeNode?.insertAfter(\n              themeVarNodes[themeVarNodes.length - 1],\n              cssVarNode\n            )\n          } else {\n            themeNode?.append(cssVarNode)\n          }\n        }\n      }\n    },\n  }\n}\n\nfunction upsertThemeNode(root: Root): AtRule {\n  let themeNode = root.nodes.find(\n    (node): node is AtRule =>\n      node.type === \"atrule\" &&\n      node.name === \"theme\" &&\n      node.params === \"inline\"\n  )\n\n  if (!themeNode) {\n    themeNode = postcss.atRule({\n      name: \"theme\",\n      params: \"inline\",\n      nodes: [],\n      raws: { semicolon: true, between: \" \", before: \"\\n\" },\n    })\n    root.append(themeNode)\n    root.insertBefore(themeNode, postcss.comment({ text: \"---break---\" }))\n  }\n\n  return themeNode\n}\n\nfunction addCustomVariant({ params }: { params: string }) {\n  return {\n    postcssPlugin: \"add-custom-variant\",\n    Once(root: Root) {\n      const customVariant = root.nodes.find(\n        (node): node is AtRule =>\n          node.type === \"atrule\" && node.name === \"custom-variant\"\n      )\n\n      if (!customVariant) {\n        // Find all import nodes\n        const importNodes = root.nodes.filter(\n          (node): node is AtRule =>\n            node.type === \"atrule\" && node.name === \"import\"\n        )\n\n        const variantNode = postcss.atRule({\n          name: \"custom-variant\",\n          params,\n          raws: { semicolon: true, before: \"\\n\" },\n        })\n\n        if (importNodes.length > 0) {\n          // Insert after the last import\n          const lastImport = importNodes[importNodes.length - 1]\n          root.insertAfter(lastImport, variantNode)\n        } else {\n          // If no imports, insert after the first node\n          root.insertAfter(root.nodes[0], variantNode)\n        }\n\n        root.insertBefore(variantNode, postcss.comment({ text: \"---break---\" }))\n      }\n    },\n  }\n}\n\nfunction addCustomImport({ params }: { params: string }) {\n  return {\n    postcssPlugin: \"add-custom-import\",\n    Once(root: Root) {\n      const importNodes = root.nodes.filter(\n        (node): node is AtRule =>\n          node.type === \"atrule\" && node.name === \"import\"\n      )\n\n      // Find custom variant node (to ensure we insert before it)\n      const customVariantNode = root.nodes.find(\n        (node): node is AtRule =>\n          node.type === \"atrule\" && node.name === \"custom-variant\"\n      )\n\n      // Check if our specific import already exists\n      const hasImport = importNodes.some(\n        (node) => node.params.replace(/[\"']/g, \"\") === params\n      )\n\n      if (!hasImport) {\n        const importNode = postcss.atRule({\n          name: \"import\",\n          params: `\"${params}\"`,\n          raws: { semicolon: true, before: \"\\n\" },\n        })\n\n        if (importNodes.length > 0) {\n          // If there are existing imports, add after the last import\n          const lastImport = importNodes[importNodes.length - 1]\n          root.insertAfter(lastImport, importNode)\n        } else if (customVariantNode) {\n          // If no imports but has custom-variant, insert before it\n          root.insertBefore(customVariantNode, importNode)\n          root.insertBefore(\n            customVariantNode,\n            postcss.comment({ text: \"---break---\" })\n          )\n        } else {\n          // If no imports and no custom-variant, insert at the start\n          root.prepend(importNode)\n          root.insertAfter(importNode, postcss.comment({ text: \"---break---\" }))\n        }\n      }\n    },\n  }\n}\n\nfunction updateTailwindConfigPlugin(\n  tailwindConfig: z.infer<typeof registryItemTailwindSchema>[\"config\"]\n) {\n  return {\n    postcssPlugin: \"update-tailwind-config\",\n    Once(root: Root) {\n      if (!tailwindConfig?.plugins) {\n        return\n      }\n\n      const quoteType = getQuoteType(root)\n      const quote = quoteType === \"single\" ? \"'\" : '\"'\n\n      const pluginNodes = root.nodes.filter(\n        (node): node is AtRule =>\n          node.type === \"atrule\" && node.name === \"plugin\"\n      )\n\n      const lastPluginNode =\n        pluginNodes[pluginNodes.length - 1] || root.nodes[0]\n\n      for (const plugin of tailwindConfig.plugins) {\n        const pluginName = plugin.replace(/^require\\([\"']|[\"']\\)$/g, \"\")\n\n        // Check if the plugin is already present.\n        if (\n          pluginNodes.some((node) => {\n            return node.params.replace(/[\"']/g, \"\") === pluginName\n          })\n        ) {\n          continue\n        }\n\n        const pluginNode = postcss.atRule({\n          name: \"plugin\",\n          params: `${quote}${pluginName}${quote}`,\n          raws: { semicolon: true, before: \"\\n\" },\n        })\n        root.insertAfter(lastPluginNode, pluginNode)\n        root.insertBefore(pluginNode, postcss.comment({ text: \"---break---\" }))\n      }\n    },\n  }\n}\n\nfunction updateTailwindConfigKeyframesPlugin(\n  tailwindConfig: z.infer<typeof registryItemTailwindSchema>[\"config\"]\n) {\n  return {\n    postcssPlugin: \"update-tailwind-config-keyframes\",\n    Once(root: Root) {\n      if (!tailwindConfig?.theme?.extend?.keyframes) {\n        return\n      }\n\n      const themeNode = upsertThemeNode(root)\n      const existingKeyFrameNodes = themeNode.nodes?.filter(\n        (node): node is AtRule =>\n          node.type === \"atrule\" && node.name === \"keyframes\"\n      )\n\n      const keyframeValueSchema = z.record(\n        z.string(),\n        z.record(z.string(), z.string())\n      )\n\n      for (const [keyframeName, keyframeValue] of Object.entries(\n        tailwindConfig.theme.extend.keyframes\n      )) {\n        if (typeof keyframeName !== \"string\") {\n          continue\n        }\n\n        const parsedKeyframeValue = keyframeValueSchema.safeParse(keyframeValue)\n\n        if (!parsedKeyframeValue.success) {\n          continue\n        }\n\n        if (\n          existingKeyFrameNodes?.find(\n            (node): node is postcss.AtRule =>\n              node.type === \"atrule\" &&\n              node.name === \"keyframes\" &&\n              node.params === keyframeName\n          )\n        ) {\n          continue\n        }\n\n        const keyframeNode = postcss.atRule({\n          name: \"keyframes\",\n          params: keyframeName,\n          nodes: [],\n          raws: { semicolon: true, between: \" \", before: \"\\n  \" },\n        })\n\n        for (const [key, values] of Object.entries(parsedKeyframeValue.data)) {\n          const rule = postcss.rule({\n            selector: key,\n            nodes: Object.entries(values).map(([key, value]) =>\n              postcss.decl({\n                prop: key,\n                value,\n                raws: { semicolon: true, before: \"\\n      \", between: \": \" },\n              })\n            ),\n            raws: { semicolon: true, between: \" \", before: \"\\n    \" },\n          })\n          keyframeNode.append(rule)\n        }\n\n        themeNode.append(keyframeNode)\n        themeNode.insertBefore(\n          keyframeNode,\n          postcss.comment({ text: \"---break---\" })\n        )\n      }\n    },\n  }\n}\n\nfunction updateTailwindConfigAnimationPlugin(\n  tailwindConfig: z.infer<typeof registryItemTailwindSchema>[\"config\"]\n) {\n  return {\n    postcssPlugin: \"update-tailwind-config-animation\",\n    Once(root: Root) {\n      if (!tailwindConfig?.theme?.extend?.animation) {\n        return\n      }\n\n      const themeNode = upsertThemeNode(root)\n      const existingAnimationNodes = themeNode.nodes?.filter(\n        (node): node is postcss.Declaration =>\n          node.type === \"decl\" && node.prop.startsWith(\"--animate-\")\n      )\n\n      const parsedAnimationValue = z\n        .record(z.string(), z.string())\n        .safeParse(tailwindConfig.theme.extend.animation)\n      if (!parsedAnimationValue.success) {\n        return\n      }\n\n      for (const [key, value] of Object.entries(parsedAnimationValue.data)) {\n        const prop = `--animate-${key}`\n        if (\n          existingAnimationNodes?.find(\n            (node): node is postcss.Declaration => node.prop === prop\n          )\n        ) {\n          continue\n        }\n\n        const animationNode = postcss.decl({\n          prop,\n          value,\n          raws: { semicolon: true, between: \": \", before: \"\\n  \" },\n        })\n        themeNode.append(animationNode)\n      }\n    },\n  }\n}\n\nfunction getQuoteType(root: Root): \"single\" | \"double\" {\n  const firstNode = root.nodes[0]\n  const raw = firstNode.toString()\n\n  if (raw.includes(\"'\")) {\n    return \"single\"\n  }\n  return \"double\"\n}\n\nexport function isLocalHSLValue(value: string) {\n  if (\n    value.startsWith(\"hsl\") ||\n    value.startsWith(\"rgb\") ||\n    value.startsWith(\"#\") ||\n    value.startsWith(\"oklch\")\n  ) {\n    return false\n  }\n\n  const chunks = value.split(\" \")\n\n  return (\n    chunks.length === 3 &&\n    chunks.slice(1, 3).every((chunk) => chunk.includes(\"%\"))\n  )\n}\n\nexport function isColorValue(value: string) {\n  return (\n    value.startsWith(\"hsl\") ||\n    value.startsWith(\"rgb\") ||\n    value.startsWith(\"#\") ||\n    value.startsWith(\"oklch\")\n  )\n}\n","import { RegistryItem } from \"@/src/schema\"\nimport { Config } from \"@/src/utils/get-config\"\nimport { getPackageInfo } from \"@/src/utils/get-package-info\"\nimport { getPackageManager } from \"@/src/utils/get-package-manager\"\nimport { logger } from \"@/src/utils/logger\"\nimport { spinner } from \"@/src/utils/spinner\"\nimport { execa } from \"execa\"\nimport prompts from \"prompts\"\n\nexport async function updateDependencies(\n  dependencies: RegistryItem[\"dependencies\"],\n  devDependencies: RegistryItem[\"devDependencies\"],\n  config: Config,\n  options: {\n    silent?: boolean\n  }\n) {\n  dependencies = Array.from(new Set(dependencies))\n  devDependencies = Array.from(new Set(devDependencies))\n\n  if (!dependencies?.length && !devDependencies?.length) {\n    return\n  }\n\n  options = {\n    silent: false,\n    ...options,\n  }\n\n  const dependenciesSpinner = spinner(`Installing dependencies.`, {\n    silent: options.silent,\n  })?.start()\n  const packageManager = await getUpdateDependenciesPackageManager(config)\n\n  // Offer to use --force or --legacy-peer-deps if using React 19 with npm.\n  let flag = \"\"\n  if (shouldPromptForNpmFlag(config) && packageManager === \"npm\") {\n    if (options.silent) {\n      flag = \"force\"\n    } else {\n      dependenciesSpinner.stopAndPersist()\n      logger.warn(\n        \"\\nIt looks like you are using React 19. \\nSome packages may fail to install due to peer dependency issues in npm (see https://ui.shadcn.com/react-19).\\n\"\n      )\n      const confirmation = await prompts([\n        {\n          type: \"select\",\n          name: \"flag\",\n          message: \"How would you like to proceed?\",\n          choices: [\n            { title: \"Use --force\", value: \"force\" },\n            { title: \"Use --legacy-peer-deps\", value: \"legacy-peer-deps\" },\n          ],\n        },\n      ])\n\n      if (confirmation) {\n        flag = confirmation.flag\n      }\n    }\n  }\n\n  dependenciesSpinner?.start()\n\n  await installWithPackageManager(\n    packageManager,\n    dependencies,\n    devDependencies,\n    config.resolvedPaths.cwd,\n    flag\n  )\n\n  dependenciesSpinner?.succeed()\n}\n\nfunction shouldPromptForNpmFlag(config: Config) {\n  const packageInfo = getPackageInfo(config.resolvedPaths.cwd, false)\n\n  if (!packageInfo?.dependencies?.react) {\n    return false\n  }\n\n  const hasReact19 = /^(?:\\^|~)?19(?:\\.\\d+)*(?:-.*)?$/.test(\n    packageInfo.dependencies.react\n  )\n  const hasReactDayPicker8 =\n    packageInfo.dependencies[\"react-day-picker\"]?.startsWith(\"8\")\n\n  return hasReact19 && hasReactDayPicker8\n}\n\nasync function getUpdateDependenciesPackageManager(config: Config) {\n  const expoVersion = getPackageInfo(config.resolvedPaths.cwd, false)\n    ?.dependencies?.expo\n\n  if (expoVersion) {\n    // Ensures package versions match the React Native version.\n    // https://docs.expo.dev/more/expo-cli/#install\n    return \"expo\"\n  }\n\n  return getPackageManager(config.resolvedPaths.cwd)\n}\n\nasync function installWithPackageManager(\n  packageManager: Awaited<\n    ReturnType<typeof getUpdateDependenciesPackageManager>\n  >,\n  dependencies: string[],\n  devDependencies: string[],\n  cwd: string,\n  flag?: string\n) {\n  if (packageManager === \"npm\") {\n    return installWithNpm(dependencies, devDependencies, cwd, flag)\n  }\n\n  if (packageManager === \"deno\") {\n    return installWithDeno(dependencies, devDependencies, cwd)\n  }\n\n  if (packageManager === \"expo\") {\n    return installWithExpo(dependencies, devDependencies, cwd)\n  }\n\n  if (dependencies?.length) {\n    await execa(packageManager, [\"add\", ...dependencies], {\n      cwd,\n    })\n  }\n\n  if (devDependencies?.length) {\n    await execa(packageManager, [\"add\", \"-D\", ...devDependencies], { cwd })\n  }\n}\n\nasync function installWithNpm(\n  dependencies: string[],\n  devDependencies: string[],\n  cwd: string,\n  flag?: string\n) {\n  if (dependencies.length) {\n    await execa(\n      \"npm\",\n      [\"install\", ...(flag ? [`--${flag}`] : []), ...dependencies],\n      { cwd }\n    )\n  }\n\n  if (devDependencies.length) {\n    await execa(\n      \"npm\",\n      [\"install\", ...(flag ? [`--${flag}`] : []), \"-D\", ...devDependencies],\n      { cwd }\n    )\n  }\n}\n\nasync function installWithDeno(\n  dependencies: string[],\n  devDependencies: string[],\n  cwd: string\n) {\n  if (dependencies?.length) {\n    await execa(\"deno\", [\"add\", ...dependencies.map((dep) => `npm:${dep}`)], {\n      cwd,\n    })\n  }\n\n  if (devDependencies?.length) {\n    await execa(\n      \"deno\",\n      [\"add\", \"-D\", ...devDependencies.map((dep) => `npm:${dep}`)],\n      { cwd }\n    )\n  }\n}\n\nasync function installWithExpo(\n  dependencies: string[],\n  devDependencies: string[],\n  cwd: string\n) {\n  if (dependencies.length) {\n    await execa(\"npx\", [\"expo\", \"install\", ...dependencies], { cwd })\n  }\n\n  if (devDependencies.length) {\n    await execa(\"npx\", [\"expo\", \"install\", \"-- -D\", ...devDependencies], {\n      cwd,\n    })\n  }\n}\n","import { existsSync, promises as fs } from \"fs\"\nimport path from \"path\"\nimport { registryItemEnvVarsSchema } from \"@/src/schema\"\nimport {\n  findExistingEnvFile,\n  getNewEnvKeys,\n  mergeEnvContent,\n} from \"@/src/utils/env-helpers\"\nimport { Config } from \"@/src/utils/get-config\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { logger } from \"@/src/utils/logger\"\nimport { spinner } from \"@/src/utils/spinner\"\nimport { z } from \"zod\"\n\nexport async function updateEnvVars(\n  envVars: z.infer<typeof registryItemEnvVarsSchema> | undefined,\n  config: Config,\n  options: {\n    silent?: boolean\n  }\n) {\n  if (!envVars || Object.keys(envVars).length === 0) {\n    return {\n      envVarsAdded: [],\n      envFileUpdated: null,\n      envFileCreated: null,\n    }\n  }\n\n  options = {\n    silent: false,\n    ...options,\n  }\n\n  const envSpinner = spinner(`Adding environment variables.`, {\n    silent: options.silent,\n  })?.start()\n\n  const projectRoot = config.resolvedPaths.cwd\n\n  // Find existing env file or use .env.local as default.\n  let envFilePath = path.join(projectRoot, \".env.local\")\n  const existingEnvFile = findExistingEnvFile(projectRoot)\n\n  if (existingEnvFile) {\n    envFilePath = existingEnvFile\n  }\n\n  const envFileExists = existsSync(envFilePath)\n  const envFileName = path.basename(envFilePath)\n\n  // Convert envVars object to env file format\n  const newEnvContent = Object.entries(envVars)\n    .map(([key, value]) => `${key}=${value}`)\n    .join(\"\\n\")\n\n  let envVarsAdded: string[] = []\n  let envFileUpdated: string | null = null\n  let envFileCreated: string | null = null\n\n  if (envFileExists) {\n    const existingContent = await fs.readFile(envFilePath, \"utf-8\")\n    const mergedContent = mergeEnvContent(existingContent, newEnvContent)\n    envVarsAdded = getNewEnvKeys(existingContent, newEnvContent)\n\n    if (envVarsAdded.length > 0) {\n      await fs.writeFile(envFilePath, mergedContent, \"utf-8\")\n      envFileUpdated = path.relative(projectRoot, envFilePath)\n\n      envSpinner?.succeed(\n        `Added the following variables to ${highlighter.info(envFileName)}:`\n      )\n\n      if (!options.silent) {\n        for (const key of envVarsAdded) {\n          logger.log(`  ${highlighter.success(\"+\")} ${key}`)\n        }\n      }\n    } else {\n      envSpinner?.stop()\n    }\n  } else {\n    // Create new env file\n    await fs.writeFile(envFilePath, newEnvContent + \"\\n\", \"utf-8\")\n    envFileCreated = path.relative(projectRoot, envFilePath)\n    envVarsAdded = Object.keys(envVars)\n\n    envSpinner?.succeed(\n      `Added the following variables to ${highlighter.info(envFileName)}:`\n    )\n\n    if (!options.silent) {\n      for (const key of envVarsAdded) {\n        logger.log(`  ${highlighter.success(\"+\")} ${key}`)\n      }\n    }\n  }\n\n  if (!options.silent && envVarsAdded.length > 0) {\n    logger.break()\n  }\n\n  return {\n    envVarsAdded,\n    envFileUpdated,\n    envFileCreated,\n  }\n}\n","import path from \"path\"\nimport { getRegistryItems } from \"@/src/registry/api\"\nimport { configWithDefaults } from \"@/src/registry/config\"\nimport { resolveRegistryTree } from \"@/src/registry/resolver\"\nimport {\n  configSchema,\n  registryItemFileSchema,\n  registryItemSchema,\n  workspaceConfigSchema,\n} from \"@/src/schema\"\nimport {\n  findCommonRoot,\n  findPackageRoot,\n  getWorkspaceConfig,\n  type Config,\n} from \"@/src/utils/get-config\"\nimport { getProjectTailwindVersionFromConfig } from \"@/src/utils/get-project-info\"\nimport { handleError } from \"@/src/utils/handle-error\"\nimport { isSafeTarget } from \"@/src/utils/is-safe-target\"\nimport { logger } from \"@/src/utils/logger\"\nimport { spinner } from \"@/src/utils/spinner\"\nimport { updateCss } from \"@/src/utils/updaters/update-css\"\nimport { updateCssVars } from \"@/src/utils/updaters/update-css-vars\"\nimport { updateDependencies } from \"@/src/utils/updaters/update-dependencies\"\nimport { updateEnvVars } from \"@/src/utils/updaters/update-env-vars\"\nimport { updateFiles } from \"@/src/utils/updaters/update-files\"\nimport { updateTailwindConfig } from \"@/src/utils/updaters/update-tailwind-config\"\nimport { z } from \"zod\"\n\nexport async function addComponents(\n  components: string[],\n  config: Config,\n  options: {\n    overwrite?: boolean\n    silent?: boolean\n    isNewProject?: boolean\n    baseStyle?: boolean\n    registryHeaders?: Record<string, Record<string, string>>\n  }\n) {\n  options = {\n    overwrite: false,\n    silent: false,\n    isNewProject: false,\n    baseStyle: true,\n    ...options,\n  }\n\n  const workspaceConfig = await getWorkspaceConfig(config)\n  if (\n    workspaceConfig &&\n    workspaceConfig.ui &&\n    workspaceConfig.ui.resolvedPaths.cwd !== config.resolvedPaths.cwd\n  ) {\n    return await addWorkspaceComponents(components, config, workspaceConfig, {\n      ...options,\n      isRemote:\n        components?.length === 1 && !!components[0].match(/\\/chat\\/b\\//),\n    })\n  }\n\n  return await addProjectComponents(components, config, options)\n}\n\nasync function addProjectComponents(\n  components: string[],\n  config: z.infer<typeof configSchema>,\n  options: {\n    overwrite?: boolean\n    silent?: boolean\n    isNewProject?: boolean\n    baseStyle?: boolean\n  }\n) {\n  if (!options.baseStyle && !components.length) {\n    return\n  }\n\n  const registrySpinner = spinner(`Checking registry.`, {\n    silent: options.silent,\n  })?.start()\n  const tree = await resolveRegistryTree(components, configWithDefaults(config))\n\n  if (!tree) {\n    registrySpinner?.fail()\n    return handleError(new Error(\"Failed to fetch components from registry.\"))\n  }\n\n  try {\n    validateFilesTarget(tree.files ?? [], config.resolvedPaths.cwd)\n  } catch (error) {\n    registrySpinner?.fail()\n    return handleError(error)\n  }\n\n  registrySpinner?.succeed()\n\n  const tailwindVersion = await getProjectTailwindVersionFromConfig(config)\n\n  await updateTailwindConfig(tree.tailwind?.config, config, {\n    silent: options.silent,\n    tailwindVersion,\n  })\n\n  const overwriteCssVars = await shouldOverwriteCssVars(components, config)\n  await updateCssVars(tree.cssVars, config, {\n    cleanupDefaultNextStyles: options.isNewProject,\n    silent: options.silent,\n    tailwindVersion,\n    tailwindConfig: tree.tailwind?.config,\n    overwriteCssVars,\n    initIndex: options.baseStyle,\n  })\n\n  // Add CSS updater\n  await updateCss(tree.css, config, {\n    silent: options.silent,\n  })\n\n  await updateEnvVars(tree.envVars, config, {\n    silent: options.silent,\n  })\n\n  await updateDependencies(tree.dependencies, tree.devDependencies, config, {\n    silent: options.silent,\n  })\n  await updateFiles(tree.files, config, {\n    overwrite: options.overwrite,\n    silent: options.silent,\n  })\n\n  if (tree.docs) {\n    logger.info(tree.docs)\n  }\n}\n\nasync function addWorkspaceComponents(\n  components: string[],\n  config: z.infer<typeof configSchema>,\n  workspaceConfig: z.infer<typeof workspaceConfigSchema>,\n  options: {\n    overwrite?: boolean\n    silent?: boolean\n    isNewProject?: boolean\n    isRemote?: boolean\n    baseStyle?: boolean\n  }\n) {\n  if (!options.baseStyle && !components.length) {\n    return\n  }\n\n  const registrySpinner = spinner(`Checking registry.`, {\n    silent: options.silent,\n  })?.start()\n  const tree = await resolveRegistryTree(components, configWithDefaults(config))\n\n  if (!tree) {\n    registrySpinner?.fail()\n    return handleError(new Error(\"Failed to fetch components from registry.\"))\n  }\n\n  try {\n    validateFilesTarget(tree.files ?? [], config.resolvedPaths.cwd)\n  } catch (error) {\n    registrySpinner?.fail()\n    return handleError(error)\n  }\n\n  registrySpinner?.succeed()\n\n  const filesCreated: string[] = []\n  const filesUpdated: string[] = []\n  const filesSkipped: string[] = []\n\n  const rootSpinner = spinner(`Installing components.`)?.start()\n\n  // Process global updates (tailwind, css vars, dependencies) first for the main target.\n  // These should typically go to the UI package in a workspace.\n  const mainTargetConfig = workspaceConfig.ui\n  const tailwindVersion = await getProjectTailwindVersionFromConfig(\n    mainTargetConfig\n  )\n  const workspaceRoot = findCommonRoot(\n    config.resolvedPaths.cwd,\n    mainTargetConfig.resolvedPaths.ui\n  )\n\n  // 1. Update tailwind config.\n  if (tree.tailwind?.config) {\n    await updateTailwindConfig(tree.tailwind?.config, mainTargetConfig, {\n      silent: true,\n      tailwindVersion,\n    })\n    filesUpdated.push(\n      path.relative(\n        workspaceRoot,\n        mainTargetConfig.resolvedPaths.tailwindConfig\n      )\n    )\n  }\n\n  // 2. Update css vars.\n  if (tree.cssVars) {\n    const overwriteCssVars = await shouldOverwriteCssVars(components, config)\n    await updateCssVars(tree.cssVars, mainTargetConfig, {\n      silent: true,\n      tailwindVersion,\n      tailwindConfig: tree.tailwind?.config,\n      overwriteCssVars,\n    })\n    filesUpdated.push(\n      path.relative(workspaceRoot, mainTargetConfig.resolvedPaths.tailwindCss)\n    )\n  }\n\n  // 3. Update CSS\n  if (tree.css) {\n    await updateCss(tree.css, mainTargetConfig, {\n      silent: true,\n    })\n    filesUpdated.push(\n      path.relative(workspaceRoot, mainTargetConfig.resolvedPaths.tailwindCss)\n    )\n  }\n\n  // 4. Update environment variables\n  if (tree.envVars) {\n    await updateEnvVars(tree.envVars, mainTargetConfig, {\n      silent: true,\n    })\n  }\n\n  // 5. Update dependencies.\n  await updateDependencies(\n    tree.dependencies,\n    tree.devDependencies,\n    mainTargetConfig,\n    {\n      silent: true,\n    }\n  )\n\n  // 6. Group files by their type to determine target config and update files.\n  const filesByType = new Map<string, typeof tree.files>()\n\n  for (const file of tree.files ?? []) {\n    const type = file.type || \"registry:ui\"\n    if (!filesByType.has(type)) {\n      filesByType.set(type, [])\n    }\n    filesByType.get(type)!.push(file)\n  }\n\n  // Process each type of component with its appropriate target config.\n  for (const type of Array.from(filesByType.keys())) {\n    const typeFiles = filesByType.get(type)!\n\n    let targetConfig = type === \"registry:ui\" ? workspaceConfig.ui : config\n\n    const typeWorkspaceRoot = findCommonRoot(\n      config.resolvedPaths.cwd,\n      targetConfig.resolvedPaths.ui || targetConfig.resolvedPaths.cwd\n    )\n    const packageRoot =\n      (await findPackageRoot(\n        typeWorkspaceRoot,\n        targetConfig.resolvedPaths.cwd\n      )) ?? targetConfig.resolvedPaths.cwd\n\n    // Update files for this type.\n    const files = await updateFiles(typeFiles, targetConfig, {\n      overwrite: options.overwrite,\n      silent: true,\n      rootSpinner,\n      isRemote: options.isRemote,\n      isWorkspace: true,\n    })\n\n    filesCreated.push(\n      ...files.filesCreated.map((file) =>\n        path.relative(typeWorkspaceRoot, path.join(packageRoot, file))\n      )\n    )\n    filesUpdated.push(\n      ...files.filesUpdated.map((file) =>\n        path.relative(typeWorkspaceRoot, path.join(packageRoot, file))\n      )\n    )\n    filesSkipped.push(\n      ...files.filesSkipped.map((file) =>\n        path.relative(typeWorkspaceRoot, path.join(packageRoot, file))\n      )\n    )\n  }\n\n  rootSpinner?.succeed()\n\n  // Sort files.\n  filesCreated.sort()\n  filesUpdated.sort()\n  filesSkipped.sort()\n\n  const hasUpdatedFiles = filesCreated.length || filesUpdated.length\n  if (!hasUpdatedFiles && !filesSkipped.length) {\n    spinner(`No files updated.`, {\n      silent: options.silent,\n    })?.info()\n  }\n\n  if (filesCreated.length) {\n    spinner(\n      `Created ${filesCreated.length} ${\n        filesCreated.length === 1 ? \"file\" : \"files\"\n      }:`,\n      {\n        silent: options.silent,\n      }\n    )?.succeed()\n    for (const file of filesCreated) {\n      logger.log(`  - ${file}`)\n    }\n  }\n\n  if (filesUpdated.length) {\n    spinner(\n      `Updated ${filesUpdated.length} ${\n        filesUpdated.length === 1 ? \"file\" : \"files\"\n      }:`,\n      {\n        silent: options.silent,\n      }\n    )?.info()\n    for (const file of filesUpdated) {\n      logger.log(`  - ${file}`)\n    }\n  }\n\n  if (filesSkipped.length) {\n    spinner(\n      `Skipped ${filesSkipped.length} ${\n        filesUpdated.length === 1 ? \"file\" : \"files\"\n      }: (use --overwrite to overwrite)`,\n      {\n        silent: options.silent,\n      }\n    )?.info()\n    for (const file of filesSkipped) {\n      logger.log(`  - ${file}`)\n    }\n  }\n\n  if (tree.docs) {\n    logger.info(tree.docs)\n  }\n}\n\nasync function shouldOverwriteCssVars(\n  components: z.infer<typeof registryItemSchema>[\"name\"][],\n  config: z.infer<typeof configSchema>\n) {\n  const result = await getRegistryItems(components, { config })\n  const payload = z.array(registryItemSchema).parse(result)\n\n  return payload.some(\n    (component) =>\n      component.type === \"registry:theme\" || component.type === \"registry:style\"\n  )\n}\n\nfunction validateFilesTarget(\n  files: z.infer<typeof registryItemFileSchema>[],\n  cwd: string\n) {\n  for (const file of files) {\n    if (!file?.target) {\n      continue\n    }\n\n    if (!isSafeTarget(file.target, cwd)) {\n      throw new Error(\n        `We found an unsafe file path \"${file.target} in the registry item. Installation aborted.`\n      )\n    }\n  }\n}\n","import os from \"os\"\nimport path from \"path\"\nimport { initOptionsSchema } from \"@/src/commands/init\"\nimport { fetchRegistry } from \"@/src/registry/fetcher\"\nimport { getPackageManager } from \"@/src/utils/get-package-manager\"\nimport { handleError } from \"@/src/utils/handle-error\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { logger } from \"@/src/utils/logger\"\nimport { spinner } from \"@/src/utils/spinner\"\nimport { execa } from \"execa\"\nimport fs from \"fs-extra\"\nimport prompts from \"prompts\"\nimport { z } from \"zod\"\n\nconst MONOREPO_TEMPLATE_URL =\n  \"https://codeload.github.com/shadcn-ui/ui/tar.gz/main\"\n\nexport const TEMPLATES = {\n  next: \"next\",\n  \"next-monorepo\": \"next-monorepo\",\n} as const\n\nexport async function createProject(\n  options: Pick<\n    z.infer<typeof initOptionsSchema>,\n    \"cwd\" | \"force\" | \"srcDir\" | \"components\" | \"template\"\n  >\n) {\n  options = {\n    srcDir: false,\n    ...options,\n  }\n\n  let template: keyof typeof TEMPLATES =\n    options.template && TEMPLATES[options.template as keyof typeof TEMPLATES]\n      ? (options.template as keyof typeof TEMPLATES)\n      : \"next\"\n  let projectName: string =\n    template === TEMPLATES.next ? \"my-app\" : \"my-monorepo\"\n  let nextVersion = \"latest\"\n\n  const isRemoteComponent =\n    options.components?.length === 1 &&\n    !!options.components[0].match(/\\/chat\\/b\\//)\n\n  if (options.components && isRemoteComponent) {\n    try {\n      const [result] = await fetchRegistry(options.components)\n      const { meta } = z\n        .object({\n          meta: z.object({\n            nextVersion: z.string(),\n          }),\n        })\n        .parse(result)\n      nextVersion = meta.nextVersion\n\n      // Force template to next for remote components.\n      template = TEMPLATES.next\n    } catch (error) {\n      logger.break()\n      handleError(error)\n    }\n  }\n\n  if (!options.force) {\n    const { type, name } = await prompts([\n      {\n        type: options.template || isRemoteComponent ? null : \"select\",\n        name: \"type\",\n        message: `The path ${highlighter.info(\n          options.cwd\n        )} does not contain a package.json file.\\n  Would you like to start a new project?`,\n        choices: [\n          { title: \"Next.js\", value: \"next\" },\n          { title: \"Next.js (Monorepo)\", value: \"next-monorepo\" },\n        ],\n        initial: 0,\n      },\n      {\n        type: \"text\",\n        name: \"name\",\n        message: \"What is your project named?\",\n        initial: projectName,\n        format: (value: string) => value.trim(),\n        validate: (value: string) =>\n          value.length > 128\n            ? `Name should be less than 128 characters.`\n            : true,\n      },\n    ])\n\n    template = type ?? template\n    projectName = name\n  }\n\n  const packageManager = await getPackageManager(options.cwd, {\n    withFallback: true,\n  })\n\n  const projectPath = `${options.cwd}/${projectName}`\n\n  // Check if path is writable.\n  try {\n    await fs.access(options.cwd, fs.constants.W_OK)\n  } catch (error) {\n    logger.break()\n    logger.error(`The path ${highlighter.info(options.cwd)} is not writable.`)\n    logger.error(\n      `It is likely you do not have write permissions for this folder or the path ${highlighter.info(\n        options.cwd\n      )} does not exist.`\n    )\n    logger.break()\n    process.exit(1)\n  }\n\n  if (fs.existsSync(path.resolve(options.cwd, projectName, \"package.json\"))) {\n    logger.break()\n    logger.error(\n      `A project with the name ${highlighter.info(projectName)} already exists.`\n    )\n    logger.error(`Please choose a different name and try again.`)\n    logger.break()\n    process.exit(1)\n  }\n\n  if (template === TEMPLATES.next) {\n    await createNextProject(projectPath, {\n      version: nextVersion,\n      cwd: options.cwd,\n      packageManager,\n      srcDir: !!options.srcDir,\n    })\n  }\n\n  if (template === TEMPLATES[\"next-monorepo\"]) {\n    await createMonorepoProject(projectPath, {\n      packageManager,\n    })\n  }\n\n  return {\n    projectPath,\n    projectName,\n    template,\n  }\n}\n\nasync function createNextProject(\n  projectPath: string,\n  options: {\n    version: string\n    cwd: string\n    packageManager: string\n    srcDir: boolean\n  }\n) {\n  const createSpinner = spinner(\n    `Creating a new Next.js project. This may take a few minutes.`\n  ).start()\n\n  // Note: pnpm fails here. Fallback to npx with --use-PACKAGE-MANAGER.\n  const args = [\n    \"--tailwind\",\n    \"--eslint\",\n    \"--typescript\",\n    \"--app\",\n    options.srcDir ? \"--src-dir\" : \"--no-src-dir\",\n    \"--no-import-alias\",\n    `--use-${options.packageManager}`,\n  ]\n\n  if (\n    options.version.startsWith(\"15\") ||\n    options.version.startsWith(\"latest\") ||\n    options.version.startsWith(\"canary\")\n  ) {\n    args.push(\"--turbopack\")\n  }\n\n  try {\n    await execa(\n      \"npx\",\n      [`create-next-app@${options.version}`, projectPath, \"--silent\", ...args],\n      {\n        cwd: options.cwd,\n      }\n    )\n  } catch (error) {\n    logger.break()\n    logger.error(\n      `Something went wrong creating a new Next.js project. Please try again.`\n    )\n    process.exit(1)\n  }\n\n  createSpinner?.succeed(\"Creating a new Next.js project.\")\n}\n\nasync function createMonorepoProject(\n  projectPath: string,\n  options: {\n    packageManager: string\n  }\n) {\n  const createSpinner = spinner(\n    `Creating a new Next.js monorepo. This may take a few minutes.`\n  ).start()\n\n  try {\n    // Get the template.\n    const templatePath = path.join(os.tmpdir(), `shadcn-template-${Date.now()}`)\n    await fs.ensureDir(templatePath)\n    const response = await fetch(MONOREPO_TEMPLATE_URL)\n    if (!response.ok) {\n      throw new Error(`Failed to download template: ${response.statusText}`)\n    }\n\n    // Write the tar file\n    const tarPath = path.resolve(templatePath, \"template.tar.gz\")\n    await fs.writeFile(tarPath, Buffer.from(await response.arrayBuffer()))\n    await execa(\"tar\", [\n      \"-xzf\",\n      tarPath,\n      \"-C\",\n      templatePath,\n      \"--strip-components=2\",\n      \"ui-main/templates/monorepo-next\",\n    ])\n    const extractedPath = path.resolve(templatePath, \"monorepo-next\")\n    await fs.move(extractedPath, projectPath)\n    await fs.remove(templatePath)\n\n    // Run install.\n    await execa(options.packageManager, [\"install\"], {\n      cwd: projectPath,\n    })\n\n    // Try git init.\n    const cwd = process.cwd()\n    await execa(\"git\", [\"--version\"], { cwd: projectPath })\n    await execa(\"git\", [\"init\"], { cwd: projectPath })\n    await execa(\"git\", [\"add\", \"-A\"], { cwd: projectPath })\n    await execa(\"git\", [\"commit\", \"-m\", \"Initial commit\"], {\n      cwd: projectPath,\n    })\n    // await execa(\"cd\", [cwd])\n\n    createSpinner?.succeed(\"Creating a new Next.js monorepo.\")\n  } catch (error) {\n    createSpinner?.fail(\"Something went wrong creating a new Next.js monorepo.\")\n    handleError(error)\n  }\n}\n","import { existsSync } from \"fs\"\nimport { join } from \"path\"\nimport { logger } from \"@/src/utils/logger\"\n\nexport async function loadEnvFiles(cwd: string = process.cwd()): Promise<void> {\n  try {\n    const { config } = await import(\"@dotenvx/dotenvx\")\n    const envFiles = [\n      \".env.local\",\n      \".env.development.local\",\n      \".env.development\",\n      \".env\",\n    ]\n\n    for (const envFile of envFiles) {\n      const envPath = join(cwd, envFile)\n      if (existsSync(envPath)) {\n        config({\n          path: envPath,\n          overload: false,\n          quiet: true,\n        })\n      }\n    }\n  } catch (error) {\n    logger.warn(\"Failed to load env files:\", error)\n  }\n}\n","import fsExtra from \"fs-extra\"\n\nexport const FILE_BACKUP_SUFFIX = \".bak\"\n\nexport function createFileBackup(filePath: string): string | null {\n  if (!fsExtra.existsSync(filePath)) {\n    return null\n  }\n\n  const backupPath = `${filePath}${FILE_BACKUP_SUFFIX}`\n  try {\n    fsExtra.renameSync(filePath, backupPath)\n    return backupPath\n  } catch (error) {\n    console.error(`Failed to create backup of ${filePath}: ${error}`)\n    return null\n  }\n}\n\nexport function restoreFileBackup(filePath: string): boolean {\n  const backupPath = `${filePath}${FILE_BACKUP_SUFFIX}`\n\n  if (!fsExtra.existsSync(backupPath)) {\n    return false\n  }\n\n  try {\n    fsExtra.renameSync(backupPath, filePath)\n    return true\n  } catch (error) {\n    console.error(\n      `Warning: Could not restore backup file ${backupPath}: ${error}`\n    )\n    return false\n  }\n}\n\nexport function deleteFileBackup(filePath: string): boolean {\n  const backupPath = `${filePath}${FILE_BACKUP_SUFFIX}`\n\n  if (!fsExtra.existsSync(backupPath)) {\n    return false\n  }\n\n  try {\n    fsExtra.unlinkSync(backupPath)\n    return true\n  } catch (error) {\n    // Best effort - don't log as this is just cleanup\n    return false\n  }\n}\n","import { promises as fs } from \"fs\"\nimport path from \"path\"\nimport { Config } from \"@/src/utils/get-config\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { spinner } from \"@/src/utils/spinner\"\nimport {\n  _createSourceFile,\n  _getQuoteChar,\n} from \"@/src/utils/updaters/update-tailwind-config\"\nimport { ObjectLiteralExpression, SyntaxKind } from \"ts-morph\"\n\nexport async function updateTailwindContent(\n  content: string[],\n  config: Config,\n  options: {\n    silent?: boolean\n  }\n) {\n  if (!content) {\n    return\n  }\n\n  options = {\n    silent: false,\n    ...options,\n  }\n\n  const tailwindFileRelativePath = path.relative(\n    config.resolvedPaths.cwd,\n    config.resolvedPaths.tailwindConfig\n  )\n  const tailwindSpinner = spinner(\n    `Updating ${highlighter.info(tailwindFileRelativePath)}`,\n    {\n      silent: options.silent,\n    }\n  ).start()\n  const raw = await fs.readFile(config.resolvedPaths.tailwindConfig, \"utf8\")\n  const output = await transformTailwindContent(raw, content, config)\n  await fs.writeFile(config.resolvedPaths.tailwindConfig, output, \"utf8\")\n  tailwindSpinner?.succeed()\n}\n\nexport async function transformTailwindContent(\n  input: string,\n  content: string[],\n  config: Config\n) {\n  const sourceFile = await _createSourceFile(input, config)\n  // Find the object with content property.\n  // This is faster than traversing the default export.\n  // TODO: maybe we do need to traverse the default export?\n  const configObject = sourceFile\n    .getDescendantsOfKind(SyntaxKind.ObjectLiteralExpression)\n    .find((node) =>\n      node\n        .getProperties()\n        .some(\n          (property) =>\n            property.isKind(SyntaxKind.PropertyAssignment) &&\n            property.getName() === \"content\"\n        )\n    )\n\n  // We couldn't find the config object, so we return the input as is.\n  if (!configObject) {\n    return input\n  }\n\n  addTailwindConfigContent(configObject, content)\n\n  return sourceFile.getFullText()\n}\n\nasync function addTailwindConfigContent(\n  configObject: ObjectLiteralExpression,\n  content: string[]\n) {\n  const quoteChar = _getQuoteChar(configObject)\n\n  const existingProperty = configObject.getProperty(\"content\")\n\n  if (!existingProperty) {\n    const newProperty = {\n      name: \"content\",\n      initializer: `[${quoteChar}${content.join(\n        `${quoteChar}, ${quoteChar}`\n      )}${quoteChar}]`,\n    }\n    configObject.addPropertyAssignment(newProperty)\n\n    return configObject\n  }\n\n  if (existingProperty.isKind(SyntaxKind.PropertyAssignment)) {\n    const initializer = existingProperty.getInitializer()\n\n    // If property is an array, append.\n    if (initializer?.isKind(SyntaxKind.ArrayLiteralExpression)) {\n      for (const contentItem of content) {\n        const newValue = `${quoteChar}${contentItem}${quoteChar}`\n\n        // Check if the array already contains the value.\n        if (\n          initializer\n            .getElements()\n            .map((element) => element.getText())\n            .includes(newValue)\n        ) {\n          continue\n        }\n\n        initializer.addElement(newValue)\n      }\n    }\n\n    return configObject\n  }\n\n  return configObject\n}\n","import { promises as fs } from \"fs\"\nimport path from \"path\"\nimport { preFlightInit } from \"@/src/preflights/preflight-init\"\nimport {\n  getRegistryBaseColors,\n  getRegistryItems,\n  getRegistryStyles,\n} from \"@/src/registry/api\"\nimport { buildUrlAndHeadersForRegistryItem } from \"@/src/registry/builder\"\nimport { configWithDefaults } from \"@/src/registry/config\"\nimport { BASE_COLORS } from \"@/src/registry/constants\"\nimport { clearRegistryContext } from \"@/src/registry/context\"\nimport { rawConfigSchema } from \"@/src/schema\"\nimport { addComponents } from \"@/src/utils/add-components\"\nimport { TEMPLATES, createProject } from \"@/src/utils/create-project\"\nimport { loadEnvFiles } from \"@/src/utils/env-loader\"\nimport * as ERRORS from \"@/src/utils/errors\"\nimport {\n  FILE_BACKUP_SUFFIX,\n  createFileBackup,\n  deleteFileBackup,\n  restoreFileBackup,\n} from \"@/src/utils/file-helper\"\nimport {\n  DEFAULT_COMPONENTS,\n  DEFAULT_TAILWIND_CONFIG,\n  DEFAULT_TAILWIND_CSS,\n  DEFAULT_UTILS,\n  getConfig,\n  resolveConfigPaths,\n  type Config,\n} from \"@/src/utils/get-config\"\nimport {\n  getProjectConfig,\n  getProjectInfo,\n  getProjectTailwindVersionFromConfig,\n} from \"@/src/utils/get-project-info\"\nimport { handleError } from \"@/src/utils/handle-error\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { logger } from \"@/src/utils/logger\"\nimport { spinner } from \"@/src/utils/spinner\"\nimport { updateTailwindContent } from \"@/src/utils/updaters/update-tailwind-content\"\nimport { Command } from \"commander\"\nimport deepmerge from \"deepmerge\"\nimport fsExtra from \"fs-extra\"\nimport prompts from \"prompts\"\nimport { z } from \"zod\"\n\nprocess.on(\"exit\", (code) => {\n  const filePath = path.resolve(process.cwd(), \"components.json\")\n\n  // Delete backup if successful.\n  if (code === 0) {\n    return deleteFileBackup(filePath)\n  }\n\n  // Restore backup if error.\n  return restoreFileBackup(filePath)\n})\n\nexport const initOptionsSchema = z.object({\n  cwd: z.string(),\n  components: z.array(z.string()).optional(),\n  yes: z.boolean(),\n  defaults: z.boolean(),\n  force: z.boolean(),\n  silent: z.boolean(),\n  isNewProject: z.boolean(),\n  srcDir: z.boolean().optional(),\n  cssVariables: z.boolean(),\n  template: z\n    .string()\n    .optional()\n    .refine(\n      (val) => {\n        if (val) {\n          return TEMPLATES[val as keyof typeof TEMPLATES]\n        }\n        return true\n      },\n      {\n        message: \"Invalid template. Please use 'next' or 'next-monorepo'.\",\n      }\n    ),\n  baseColor: z\n    .string()\n    .optional()\n    .refine(\n      (val) => {\n        if (val) {\n          return BASE_COLORS.find((color) => color.name === val)\n        }\n\n        return true\n      },\n      {\n        message: `Invalid base color. Please use '${BASE_COLORS.map(\n          (color) => color.name\n        ).join(\"', '\")}'`,\n      }\n    ),\n  baseStyle: z.boolean(),\n})\n\nexport const init = new Command()\n  .name(\"init\")\n  .description(\"initialize your project and install dependencies\")\n  .argument(\"[components...]\", \"names, url or local path to component\")\n  .option(\n    \"-t, --template <template>\",\n    \"the template to use. (next, next-monorepo)\"\n  )\n  .option(\n    \"-b, --base-color <base-color>\",\n    \"the base color to use. (neutral, gray, zinc, stone, slate)\",\n    undefined\n  )\n  .option(\"-y, --yes\", \"skip confirmation prompt.\", true)\n  .option(\"-d, --defaults,\", \"use default configuration.\", false)\n  .option(\"-f, --force\", \"force overwrite of existing configuration.\", false)\n  .option(\n    \"-c, --cwd <cwd>\",\n    \"the working directory. defaults to the current directory.\",\n    process.cwd()\n  )\n  .option(\"-s, --silent\", \"mute output.\", false)\n  .option(\n    \"--src-dir\",\n    \"use the src directory when creating a new project.\",\n    false\n  )\n  .option(\n    \"--no-src-dir\",\n    \"do not use the src directory when creating a new project.\"\n  )\n  .option(\"--css-variables\", \"use css variables for theming.\", true)\n  .option(\"--no-css-variables\", \"do not use css variables for theming.\")\n  .option(\"--no-base-style\", \"do not install the base shadcn style.\")\n  .action(async (components, opts) => {\n    try {\n      // Apply defaults when --defaults flag is set.\n      if (opts.defaults) {\n        opts.template = opts.template || \"next\"\n        opts.baseColor = opts.baseColor || \"neutral\"\n      }\n\n      const options = initOptionsSchema.parse({\n        cwd: path.resolve(opts.cwd),\n        isNewProject: false,\n        components,\n        ...opts,\n      })\n\n      await loadEnvFiles(options.cwd)\n\n      // We need to check if we're initializing with a new style.\n      // This will allow us to determine if we need to install the base style.\n      // And if we should prompt the user for a base color.\n      if (components.length > 0) {\n        // We don't know the full config at this point.\n        // So we'll use a shadow config to fetch the first item.\n        let shadowConfig = configWithDefaults({})\n\n        // Check if there's a components.json file.\n        // If so, we'll merge with our shadow config.\n        const componentsJsonPath = path.resolve(options.cwd, \"components.json\")\n        if (fsExtra.existsSync(componentsJsonPath)) {\n          const existingConfig = await fsExtra.readJson(componentsJsonPath)\n          const config = rawConfigSchema.partial().parse(existingConfig)\n          shadowConfig = configWithDefaults(config)\n\n          // Since components.json might not be valid at this point.\n          // Temporarily rename components.json to allow preflight to run.\n          // We'll rename it back after preflight.\n          createFileBackup(componentsJsonPath)\n        }\n\n        // This forces a shadowConfig validation early in the process.\n        buildUrlAndHeadersForRegistryItem(components[0], shadowConfig)\n\n        const [item] = await getRegistryItems([components[0]], {\n          config: shadowConfig,\n        })\n        if (item?.type === \"registry:style\") {\n          // Set a default base color so we're not prompted.\n          // The style will extend or override it.\n          options.baseColor = \"neutral\"\n\n          // If the style extends none, we don't want to install the base style.\n          options.baseStyle =\n            item.extends === \"none\" ? false : options.baseStyle\n        }\n      }\n\n      // If --no-base-style, we don't want to prompt for a base color either.\n      // The style will extend or override it.\n      if (!options.baseStyle) {\n        options.baseColor = \"neutral\"\n      }\n\n      await runInit(options)\n\n      logger.log(\n        `${highlighter.success(\n          \"Success!\"\n        )} Project initialization completed.\\nYou may now add components.`\n      )\n\n      // We need when runninng with custom cwd.\n      deleteFileBackup(path.resolve(options.cwd, \"components.json\"))\n      logger.break()\n    } catch (error) {\n      logger.break()\n      handleError(error)\n    } finally {\n      clearRegistryContext()\n    }\n  })\n\nexport async function runInit(\n  options: z.infer<typeof initOptionsSchema> & {\n    skipPreflight?: boolean\n  }\n) {\n  let projectInfo\n  let newProjectTemplate\n  if (!options.skipPreflight) {\n    const preflight = await preFlightInit(options)\n    if (preflight.errors[ERRORS.MISSING_DIR_OR_EMPTY_PROJECT]) {\n      const { projectPath, template } = await createProject(options)\n      if (!projectPath) {\n        process.exit(1)\n      }\n      options.cwd = projectPath\n      options.isNewProject = true\n      newProjectTemplate = template\n    }\n    projectInfo = preflight.projectInfo\n  } else {\n    projectInfo = await getProjectInfo(options.cwd)\n  }\n\n  if (newProjectTemplate === \"next-monorepo\") {\n    options.cwd = path.resolve(options.cwd, \"apps/web\")\n    return await getConfig(options.cwd)\n  }\n\n  const projectConfig = await getProjectConfig(options.cwd, projectInfo)\n\n  let config = projectConfig\n    ? await promptForMinimalConfig(projectConfig, options)\n    : await promptForConfig(await getConfig(options.cwd))\n\n  if (!options.yes) {\n    const { proceed } = await prompts({\n      type: \"confirm\",\n      name: \"proceed\",\n      message: `Write configuration to ${highlighter.info(\n        \"components.json\"\n      )}. Proceed?`,\n      initial: true,\n    })\n\n    if (!proceed) {\n      process.exit(0)\n    }\n  }\n\n  const componentSpinner = spinner(`Writing components.json.`).start()\n  const targetPath = path.resolve(options.cwd, \"components.json\")\n  const backupPath = `${targetPath}${FILE_BACKUP_SUFFIX}`\n\n  // Merge with backup config if it exists and not using --force\n  if (!options.force && fsExtra.existsSync(backupPath)) {\n    const existingConfig = await fsExtra.readJson(backupPath)\n\n    // Move registries at the end of the config.\n    const { registries, ...merged } = deepmerge(existingConfig, config)\n    config = { ...merged, registries }\n  }\n\n  // Write components.json.\n  await fs.writeFile(targetPath, `${JSON.stringify(config, null, 2)}\\n`, \"utf8\")\n  componentSpinner.succeed()\n\n  // Add components.\n  const fullConfig = await resolveConfigPaths(options.cwd, config)\n  const components = [\n    // \"index\" is the default shadcn style.\n    // Why index? Because when style is true, we read style from components.json and fetch that.\n    // i.e new-york from components.json then fetch /styles/new-york/index.\n    // TODO: Fix this so that we can extend any style i.e --style=new-york.\n    ...(options.baseStyle ? [\"index\"] : []),\n    ...(options.components ?? []),\n  ]\n  await addComponents(components, fullConfig, {\n    // Init will always overwrite files.\n    overwrite: true,\n    silent: options.silent,\n    baseStyle: options.baseStyle,\n    isNewProject:\n      options.isNewProject || projectInfo?.framework.name === \"next-app\",\n  })\n\n  // If a new project is using src dir, let's update the tailwind content config.\n  // TODO: Handle this per framework.\n  if (options.isNewProject && options.srcDir) {\n    await updateTailwindContent(\n      [\"./src/**/*.{js,ts,jsx,tsx,mdx}\"],\n      fullConfig,\n      {\n        silent: options.silent,\n      }\n    )\n  }\n\n  return fullConfig\n}\n\nasync function promptForConfig(defaultConfig: Config | null = null) {\n  const [styles, baseColors] = await Promise.all([\n    getRegistryStyles(),\n    getRegistryBaseColors(),\n  ])\n\n  logger.info(\"\")\n  const options = await prompts([\n    {\n      type: \"toggle\",\n      name: \"typescript\",\n      message: `Would you like to use ${highlighter.info(\n        \"TypeScript\"\n      )} (recommended)?`,\n      initial: defaultConfig?.tsx ?? true,\n      active: \"yes\",\n      inactive: \"no\",\n    },\n    {\n      type: \"select\",\n      name: \"style\",\n      message: `Which ${highlighter.info(\"style\")} would you like to use?`,\n      choices: styles.map((style) => ({\n        title: style.label,\n        value: style.name,\n      })),\n    },\n    {\n      type: \"select\",\n      name: \"tailwindBaseColor\",\n      message: `Which color would you like to use as the ${highlighter.info(\n        \"base color\"\n      )}?`,\n      choices: baseColors.map((color) => ({\n        title: color.label,\n        value: color.name,\n      })),\n    },\n    {\n      type: \"text\",\n      name: \"tailwindCss\",\n      message: `Where is your ${highlighter.info(\"global CSS\")} file?`,\n      initial: defaultConfig?.tailwind.css ?? DEFAULT_TAILWIND_CSS,\n    },\n    {\n      type: \"toggle\",\n      name: \"tailwindCssVariables\",\n      message: `Would you like to use ${highlighter.info(\n        \"CSS variables\"\n      )} for theming?`,\n      initial: defaultConfig?.tailwind.cssVariables ?? true,\n      active: \"yes\",\n      inactive: \"no\",\n    },\n    {\n      type: \"text\",\n      name: \"tailwindPrefix\",\n      message: `Are you using a custom ${highlighter.info(\n        \"tailwind prefix eg. tw-\"\n      )}? (Leave blank if not)`,\n      initial: \"\",\n    },\n    {\n      type: \"text\",\n      name: \"tailwindConfig\",\n      message: `Where is your ${highlighter.info(\n        \"tailwind.config.js\"\n      )} located?`,\n      initial: defaultConfig?.tailwind.config ?? DEFAULT_TAILWIND_CONFIG,\n    },\n    {\n      type: \"text\",\n      name: \"components\",\n      message: `Configure the import alias for ${highlighter.info(\n        \"components\"\n      )}:`,\n      initial: defaultConfig?.aliases[\"components\"] ?? DEFAULT_COMPONENTS,\n    },\n    {\n      type: \"text\",\n      name: \"utils\",\n      message: `Configure the import alias for ${highlighter.info(\"utils\")}:`,\n      initial: defaultConfig?.aliases[\"utils\"] ?? DEFAULT_UTILS,\n    },\n    {\n      type: \"toggle\",\n      name: \"rsc\",\n      message: `Are you using ${highlighter.info(\"React Server Components\")}?`,\n      initial: defaultConfig?.rsc ?? true,\n      active: \"yes\",\n      inactive: \"no\",\n    },\n  ])\n\n  return rawConfigSchema.parse({\n    $schema: \"https://ui.shadcn.com/schema.json\",\n    style: options.style,\n    tailwind: {\n      config: options.tailwindConfig,\n      css: options.tailwindCss,\n      baseColor: options.tailwindBaseColor,\n      cssVariables: options.tailwindCssVariables,\n      prefix: options.tailwindPrefix,\n    },\n    rsc: options.rsc,\n    tsx: options.typescript,\n    aliases: {\n      utils: options.utils,\n      components: options.components,\n      // TODO: fix this.\n      lib: options.components.replace(/\\/components$/, \"lib\"),\n      hooks: options.components.replace(/\\/components$/, \"hooks\"),\n    },\n  })\n}\n\nasync function promptForMinimalConfig(\n  defaultConfig: Config,\n  opts: z.infer<typeof initOptionsSchema>\n) {\n  let style = defaultConfig.style\n  let baseColor = opts.baseColor\n  let cssVariables = defaultConfig.tailwind.cssVariables\n\n  if (!opts.defaults) {\n    const [styles, baseColors, tailwindVersion] = await Promise.all([\n      getRegistryStyles(),\n      getRegistryBaseColors(),\n      getProjectTailwindVersionFromConfig(defaultConfig),\n    ])\n\n    const options = await prompts([\n      {\n        type: tailwindVersion === \"v4\" ? null : \"select\",\n        name: \"style\",\n        message: `Which ${highlighter.info(\"style\")} would you like to use?`,\n        choices: styles.map((style) => ({\n          title:\n            style.name === \"new-york\" ? \"New York (Recommended)\" : style.label,\n          value: style.name,\n        })),\n        initial: 0,\n      },\n      {\n        type: opts.baseColor ? null : \"select\",\n        name: \"tailwindBaseColor\",\n        message: `Which color would you like to use as the ${highlighter.info(\n          \"base color\"\n        )}?`,\n        choices: baseColors.map((color) => ({\n          title: color.label,\n          value: color.name,\n        })),\n      },\n    ])\n\n    style = options.style ?? \"new-york\"\n    baseColor = options.tailwindBaseColor ?? baseColor\n    cssVariables = opts.cssVariables\n  }\n\n  return rawConfigSchema.parse({\n    $schema: defaultConfig?.$schema,\n    style,\n    tailwind: {\n      ...defaultConfig?.tailwind,\n      baseColor,\n      cssVariables,\n    },\n    rsc: defaultConfig?.rsc,\n    tsx: defaultConfig?.tsx,\n    iconLibrary: defaultConfig?.iconLibrary,\n    aliases: defaultConfig?.aliases,\n  })\n}\n","import path from \"path\"\nimport { addOptionsSchema } from \"@/src/commands/add\"\nimport * as ERRORS from \"@/src/utils/errors\"\nimport { getConfig } from \"@/src/utils/get-config\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { logger } from \"@/src/utils/logger\"\nimport fs from \"fs-extra\"\nimport { z } from \"zod\"\n\nexport async function preFlightAdd(options: z.infer<typeof addOptionsSchema>) {\n  const errors: Record<string, boolean> = {}\n\n  // Ensure target directory exists.\n  // Check for empty project. We assume if no package.json exists, the project is empty.\n  if (\n    !fs.existsSync(options.cwd) ||\n    !fs.existsSync(path.resolve(options.cwd, \"package.json\"))\n  ) {\n    errors[ERRORS.MISSING_DIR_OR_EMPTY_PROJECT] = true\n    return {\n      errors,\n      config: null,\n    }\n  }\n\n  // Check for existing components.json file.\n  if (!fs.existsSync(path.resolve(options.cwd, \"components.json\"))) {\n    errors[ERRORS.MISSING_CONFIG] = true\n    return {\n      errors,\n      config: null,\n    }\n  }\n\n  try {\n    const config = await getConfig(options.cwd)\n\n    return {\n      errors,\n      config: config!,\n    }\n  } catch (error) {\n    logger.break()\n    logger.error(\n      `An invalid ${highlighter.info(\n        \"components.json\"\n      )} file was found at ${highlighter.info(\n        options.cwd\n      )}.\\nBefore you can add components, you must create a valid ${highlighter.info(\n        \"components.json\"\n      )} file by running the ${highlighter.info(\"init\")} command.`\n    )\n    logger.error(\n      `Learn more at ${highlighter.info(\n        \"https://ui.shadcn.com/docs/components-json\"\n      )}.`\n    )\n    logger.break()\n    process.exit(1)\n  }\n}\n","import fs from \"fs/promises\"\nimport path from \"path\"\nimport { getRegistryItems } from \"@/src/registry/api\"\nimport { Config } from \"@/src/utils/get-config\"\n\nexport async function updateAppIndex(component: string, config: Config) {\n  const indexPath = path.join(config.resolvedPaths.cwd, \"app/page.tsx\")\n\n  if (!(await fs.stat(indexPath)).isFile()) {\n    return\n  }\n\n  const [registryItem] = await getRegistryItems([component], { config })\n  if (\n    !registryItem?.meta?.importSpecifier ||\n    !registryItem?.meta?.moduleSpecifier\n  ) {\n    return\n  }\n\n  // Overwrite the index file with the new import.\n  const content = `import { ${registryItem?.meta?.importSpecifier} } from \"${registryItem.meta.moduleSpecifier}\"\\n\\nexport default function Page() {\\n  return <${registryItem?.meta?.importSpecifier} />\\n}`\n  await fs.writeFile(indexPath, content, \"utf8\")\n}\n","import path from \"path\"\nimport { runInit } from \"@/src/commands/init\"\nimport { preFlightAdd } from \"@/src/preflights/preflight-add\"\nimport { getRegistryItems, getShadcnRegistryIndex } from \"@/src/registry/api\"\nimport { DEPRECATED_COMPONENTS } from \"@/src/registry/constants\"\nimport { clearRegistryContext } from \"@/src/registry/context\"\nimport { isUniversalRegistryItem } from \"@/src/registry/utils\"\nimport { addComponents } from \"@/src/utils/add-components\"\nimport { createProject } from \"@/src/utils/create-project\"\nimport { loadEnvFiles } from \"@/src/utils/env-loader\"\nimport * as ERRORS from \"@/src/utils/errors\"\nimport { createConfig, getConfig } from \"@/src/utils/get-config\"\nimport { getProjectInfo } from \"@/src/utils/get-project-info\"\nimport { handleError } from \"@/src/utils/handle-error\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { logger } from \"@/src/utils/logger\"\nimport { updateAppIndex } from \"@/src/utils/update-app-index\"\nimport { Command } from \"commander\"\nimport prompts from \"prompts\"\nimport { z } from \"zod\"\n\nexport const addOptionsSchema = z.object({\n  components: z.array(z.string()).optional(),\n  yes: z.boolean(),\n  overwrite: z.boolean(),\n  cwd: z.string(),\n  all: z.boolean(),\n  path: z.string().optional(),\n  silent: z.boolean(),\n  srcDir: z.boolean().optional(),\n  cssVariables: z.boolean(),\n})\n\nexport const add = new Command()\n  .name(\"add\")\n  .description(\"add a component to your project\")\n  .argument(\"[components...]\", \"names, url or local path to component\")\n  .option(\"-y, --yes\", \"skip confirmation prompt.\", false)\n  .option(\"-o, --overwrite\", \"overwrite existing files.\", false)\n  .option(\n    \"-c, --cwd <cwd>\",\n    \"the working directory. defaults to the current directory.\",\n    process.cwd()\n  )\n  .option(\"-a, --all\", \"add all available components\", false)\n  .option(\"-p, --path <path>\", \"the path to add the component to.\")\n  .option(\"-s, --silent\", \"mute output.\", false)\n  .option(\n    \"--src-dir\",\n    \"use the src directory when creating a new project.\",\n    false\n  )\n  .option(\n    \"--no-src-dir\",\n    \"do not use the src directory when creating a new project.\"\n  )\n  .option(\"--css-variables\", \"use css variables for theming.\", true)\n  .option(\"--no-css-variables\", \"do not use css variables for theming.\")\n  .action(async (components, opts) => {\n    try {\n      const options = addOptionsSchema.parse({\n        components,\n        cwd: path.resolve(opts.cwd),\n        ...opts,\n      })\n\n      await loadEnvFiles(options.cwd)\n\n      let initialConfig = await getConfig(options.cwd)\n      if (!initialConfig) {\n        initialConfig = createConfig({\n          style: \"new-york\",\n          resolvedPaths: {\n            cwd: options.cwd,\n          },\n        })\n      }\n\n      if (components.length > 0) {\n        const [registryItem] = await getRegistryItems([components[0]], {\n          config: initialConfig,\n        })\n        const itemType = registryItem?.type\n\n        if (isUniversalRegistryItem(registryItem)) {\n          await addComponents(components, initialConfig, options)\n          return\n        }\n\n        if (\n          !options.yes &&\n          (itemType === \"registry:style\" || itemType === \"registry:theme\")\n        ) {\n          logger.break()\n          const { confirm } = await prompts({\n            type: \"confirm\",\n            name: \"confirm\",\n            message: highlighter.warn(\n              `You are about to install a new ${itemType.replace(\n                \"registry:\",\n                \"\"\n              )}. \\nExisting CSS variables and components will be overwritten. Continue?`\n            ),\n          })\n          if (!confirm) {\n            logger.break()\n            logger.log(`Installation cancelled.`)\n            logger.break()\n            process.exit(1)\n          }\n        }\n      }\n\n      if (!options.components?.length) {\n        options.components = await promptForRegistryComponents(options)\n      }\n\n      const projectInfo = await getProjectInfo(options.cwd)\n      if (projectInfo?.tailwindVersion === \"v4\") {\n        const deprecatedComponents = DEPRECATED_COMPONENTS.filter((component) =>\n          options.components?.includes(component.name)\n        )\n\n        if (deprecatedComponents?.length) {\n          logger.break()\n          deprecatedComponents.forEach((component) => {\n            logger.warn(highlighter.warn(component.message))\n          })\n          logger.break()\n          process.exit(1)\n        }\n      }\n\n      let { errors, config } = await preFlightAdd(options)\n\n      // No components.json file. Prompt the user to run init.\n      if (errors[ERRORS.MISSING_CONFIG]) {\n        const { proceed } = await prompts({\n          type: \"confirm\",\n          name: \"proceed\",\n          message: `You need to create a ${highlighter.info(\n            \"components.json\"\n          )} file to add components. Proceed?`,\n          initial: true,\n        })\n\n        if (!proceed) {\n          logger.break()\n          process.exit(1)\n        }\n\n        config = await runInit({\n          cwd: options.cwd,\n          yes: true,\n          force: true,\n          defaults: false,\n          skipPreflight: false,\n          silent: true,\n          isNewProject: false,\n          srcDir: options.srcDir,\n          cssVariables: options.cssVariables,\n          baseStyle: true,\n        })\n      }\n\n      let shouldUpdateAppIndex = false\n      if (errors[ERRORS.MISSING_DIR_OR_EMPTY_PROJECT]) {\n        const { projectPath, template } = await createProject({\n          cwd: options.cwd,\n          force: options.overwrite,\n          srcDir: options.srcDir,\n          components: options.components,\n        })\n        if (!projectPath) {\n          logger.break()\n          process.exit(1)\n        }\n        options.cwd = projectPath\n\n        if (template === \"next-monorepo\") {\n          options.cwd = path.resolve(options.cwd, \"apps/web\")\n          config = await getConfig(options.cwd)\n        } else {\n          config = await runInit({\n            cwd: options.cwd,\n            yes: true,\n            force: true,\n            defaults: false,\n            skipPreflight: true,\n            silent: true,\n            isNewProject: true,\n            srcDir: options.srcDir,\n            cssVariables: options.cssVariables,\n            baseStyle: true,\n          })\n\n          shouldUpdateAppIndex =\n            options.components?.length === 1 &&\n            !!options.components[0].match(/\\/chat\\/b\\//)\n        }\n      }\n\n      if (!config) {\n        throw new Error(\n          `Failed to read config at ${highlighter.info(options.cwd)}.`\n        )\n      }\n\n      await addComponents(options.components, config, options)\n\n      // If we're adding a single component and it's from the v0 registry,\n      // let's update the app/page.tsx file to import the component.\n      if (shouldUpdateAppIndex) {\n        await updateAppIndex(options.components[0], config)\n      }\n    } catch (error) {\n      logger.break()\n      handleError(error)\n    } finally {\n      clearRegistryContext()\n    }\n  })\n\nasync function promptForRegistryComponents(\n  options: z.infer<typeof addOptionsSchema>\n) {\n  const registryIndex = await getShadcnRegistryIndex()\n  if (!registryIndex) {\n    logger.break()\n    handleError(new Error(\"Failed to fetch registry index.\"))\n    return []\n  }\n\n  if (options.all) {\n    return registryIndex\n      .map((entry) => entry.name)\n      .filter(\n        (component) => !DEPRECATED_COMPONENTS.some((c) => c.name === component)\n      )\n  }\n\n  if (options.components?.length) {\n    return options.components\n  }\n\n  const { components } = await prompts({\n    type: \"multiselect\",\n    name: \"components\",\n    message: \"Which components would you like to add?\",\n    hint: \"Space to select. A to toggle all. Enter to submit.\",\n    instructions: false,\n    choices: registryIndex\n      .filter(\n        (entry) =>\n          entry.type === \"registry:ui\" &&\n          !DEPRECATED_COMPONENTS.some(\n            (component) => component.name === entry.name\n          )\n      )\n      .map((entry) => ({\n        title: entry.name,\n        value: entry.name,\n        selected: options.all ? true : options.components?.includes(entry.name),\n      })),\n  })\n\n  if (!components?.length) {\n    logger.warn(\"No components selected. Exiting.\")\n    logger.info(\"\")\n    process.exit(1)\n  }\n\n  const result = z.array(z.string()).safeParse(components)\n  if (!result.success) {\n    logger.error(\"\")\n    handleError(new Error(\"Something went wrong. Please try again.\"))\n    return []\n  }\n  return result.data\n}\n","import path from \"path\"\nimport { buildOptionsSchema } from \"@/src/commands/build\"\nimport * as ERRORS from \"@/src/utils/errors\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { logger } from \"@/src/utils/logger\"\nimport fs from \"fs-extra\"\nimport { z } from \"zod\"\n\nexport async function preFlightBuild(\n  options: z.infer<typeof buildOptionsSchema>\n) {\n  const errors: Record<string, boolean> = {}\n\n  const resolvePaths = {\n    cwd: options.cwd,\n    registryFile: path.resolve(options.cwd, options.registryFile),\n    outputDir: path.resolve(options.cwd, options.outputDir),\n  }\n\n  // Ensure registry file exists.\n  if (!fs.existsSync(resolvePaths.registryFile)) {\n    errors[ERRORS.BUILD_MISSING_REGISTRY_FILE] = true\n  }\n\n  // Create output directory if it doesn't exist.\n  await fs.mkdir(resolvePaths.outputDir, { recursive: true })\n\n  if (Object.keys(errors).length > 0) {\n    if (errors[ERRORS.BUILD_MISSING_REGISTRY_FILE]) {\n      logger.break()\n      logger.error(\n        `The path ${highlighter.info(\n          resolvePaths.registryFile\n        )} does not exist.`\n      )\n    }\n\n    logger.break()\n    process.exit(1)\n  }\n\n  return {\n    errors,\n    resolvePaths,\n  }\n}\n","import * as fs from \"fs/promises\"\nimport * as path from \"path\"\nimport { preFlightBuild } from \"@/src/preflights/preflight-build\"\nimport { registryItemSchema, registrySchema } from \"@/src/schema\"\nimport { handleError } from \"@/src/utils/handle-error\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { logger } from \"@/src/utils/logger\"\nimport { spinner } from \"@/src/utils/spinner\"\nimport { Command } from \"commander\"\nimport { z } from \"zod\"\n\nexport const buildOptionsSchema = z.object({\n  cwd: z.string(),\n  registryFile: z.string(),\n  outputDir: z.string(),\n})\n\nexport const build = new Command()\n  .name(\"build\")\n  .description(\"build components for a shadcn registry\")\n  .argument(\"[registry]\", \"path to registry.json file\", \"./registry.json\")\n  .option(\n    \"-o, --output <path>\",\n    \"destination directory for json files\",\n    \"./public/r\"\n  )\n  .option(\n    \"-c, --cwd <cwd>\",\n    \"the working directory. defaults to the current directory.\",\n    process.cwd()\n  )\n  .action(async (registry: string, opts) => {\n    try {\n      const options = buildOptionsSchema.parse({\n        cwd: path.resolve(opts.cwd),\n        registryFile: registry,\n        outputDir: opts.output,\n      })\n\n      const { resolvePaths } = await preFlightBuild(options)\n      const content = await fs.readFile(resolvePaths.registryFile, \"utf-8\")\n\n      const result = registrySchema.safeParse(JSON.parse(content))\n\n      if (!result.success) {\n        logger.error(\n          `Invalid registry file found at ${highlighter.info(\n            resolvePaths.registryFile\n          )}.`\n        )\n        process.exit(1)\n      }\n\n      const buildSpinner = spinner(\"Building registry...\")\n      for (const registryItem of result.data.items) {\n        if (!registryItem.files) {\n          continue\n        }\n\n        buildSpinner.start(`Building ${registryItem.name}...`)\n\n        // Add the schema to the registry item.\n        registryItem[\"$schema\"] =\n          \"https://ui.shadcn.com/schema/registry-item.json\"\n\n        // Loop through each file in the files array.\n        for (const file of registryItem.files) {\n          file[\"content\"] = await fs.readFile(\n            path.resolve(resolvePaths.cwd, file.path),\n            \"utf-8\"\n          )\n        }\n\n        // Validate the registry item.\n        const result = registryItemSchema.safeParse(registryItem)\n        if (!result.success) {\n          logger.error(\n            `Invalid registry item found for ${highlighter.info(\n              registryItem.name\n            )}.`\n          )\n          continue\n        }\n\n        // Write the registry item to the output directory.\n        await fs.writeFile(\n          path.resolve(resolvePaths.outputDir, `${result.data.name}.json`),\n          JSON.stringify(result.data, null, 2)\n        )\n      }\n\n      // Copy registry.json to the output directory.\n      await fs.copyFile(\n        resolvePaths.registryFile,\n        path.resolve(resolvePaths.outputDir, \"registry.json\")\n      )\n\n      buildSpinner.succeed(\"Building registry.\")\n    } catch (error) {\n      logger.break()\n      handleError(error)\n    }\n  })\n","import { existsSync, promises as fs } from \"fs\"\nimport path from \"path\"\nimport {\n  fetchTree,\n  getItemTargetPath,\n  getRegistryBaseColor,\n  getShadcnRegistryIndex,\n} from \"@/src/registry/api\"\nimport { registryIndexSchema } from \"@/src/schema\"\nimport { Config, getConfig } from \"@/src/utils/get-config\"\nimport { handleError } from \"@/src/utils/handle-error\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { logger } from \"@/src/utils/logger\"\nimport { transform } from \"@/src/utils/transformers\"\nimport { Command } from \"commander\"\nimport { diffLines, type Change } from \"diff\"\nimport { z } from \"zod\"\n\nconst updateOptionsSchema = z.object({\n  component: z.string().optional(),\n  yes: z.boolean(),\n  cwd: z.string(),\n  path: z.string().optional(),\n})\n\nexport const diff = new Command()\n  .name(\"diff\")\n  .description(\"check for updates against the registry\")\n  .argument(\"[component]\", \"the component name\")\n  .option(\"-y, --yes\", \"skip confirmation prompt.\", false)\n  .option(\n    \"-c, --cwd <cwd>\",\n    \"the working directory. defaults to the current directory.\",\n    process.cwd()\n  )\n  .action(async (name, opts) => {\n    try {\n      const options = updateOptionsSchema.parse({\n        component: name,\n        ...opts,\n      })\n\n      const cwd = path.resolve(options.cwd)\n\n      if (!existsSync(cwd)) {\n        logger.error(`The path ${cwd} does not exist. Please try again.`)\n        process.exit(1)\n      }\n\n      const config = await getConfig(cwd)\n      if (!config) {\n        logger.warn(\n          `Configuration is missing. Please run ${highlighter.success(\n            `init`\n          )} to create a components.json file.`\n        )\n        process.exit(1)\n      }\n\n      const registryIndex = await getShadcnRegistryIndex()\n\n      if (!registryIndex) {\n        handleError(new Error(\"Failed to fetch registry index.\"))\n        process.exit(1)\n      }\n\n      if (!options.component) {\n        const targetDir = config.resolvedPaths.components\n\n        // Find all components that exist in the project.\n        const projectComponents = registryIndex.filter((item) => {\n          for (const file of item.files ?? []) {\n            const filePath = path.resolve(\n              targetDir,\n              typeof file === \"string\" ? file : file.path\n            )\n            if (existsSync(filePath)) {\n              return true\n            }\n          }\n\n          return false\n        })\n\n        // Check for updates.\n        const componentsWithUpdates = []\n        for (const component of projectComponents) {\n          const changes = await diffComponent(component, config)\n          if (changes.length) {\n            componentsWithUpdates.push({\n              name: component.name,\n              changes,\n            })\n          }\n        }\n\n        if (!componentsWithUpdates.length) {\n          logger.info(\"No updates found.\")\n          process.exit(0)\n        }\n\n        logger.info(\"The following components have updates available:\")\n        for (const component of componentsWithUpdates) {\n          logger.info(`- ${component.name}`)\n          for (const change of component.changes) {\n            logger.info(`  - ${change.filePath}`)\n          }\n        }\n        logger.break()\n        logger.info(\n          `Run ${highlighter.success(`diff <component>`)} to see the changes.`\n        )\n        process.exit(0)\n      }\n\n      // Show diff for a single component.\n      const component = registryIndex.find(\n        (item) => item.name === options.component\n      )\n\n      if (!component) {\n        logger.error(\n          `The component ${highlighter.success(\n            options.component\n          )} does not exist.`\n        )\n        process.exit(1)\n      }\n\n      const changes = await diffComponent(component, config)\n\n      if (!changes.length) {\n        logger.info(`No updates found for ${options.component}.`)\n        process.exit(0)\n      }\n\n      for (const change of changes) {\n        logger.info(`- ${change.filePath}`)\n        await printDiff(change.patch)\n        logger.info(\"\")\n      }\n    } catch (error) {\n      handleError(error)\n    }\n  })\n\nasync function diffComponent(\n  component: z.infer<typeof registryIndexSchema>[number],\n  config: Config\n) {\n  const payload = await fetchTree(config.style, [component])\n  const baseColor = await getRegistryBaseColor(config.tailwind.baseColor)\n\n  if (!payload) {\n    return []\n  }\n\n  const changes = []\n\n  for (const item of payload) {\n    const targetDir = await getItemTargetPath(config, item)\n\n    if (!targetDir) {\n      continue\n    }\n\n    for (const file of item.files ?? []) {\n      const filePath = path.resolve(\n        targetDir,\n        typeof file === \"string\" ? file : file.path\n      )\n\n      if (!existsSync(filePath)) {\n        continue\n      }\n\n      const fileContent = await fs.readFile(filePath, \"utf8\")\n\n      if (typeof file === \"string\" || !file.content) {\n        continue\n      }\n\n      const registryContent = await transform({\n        filename: file.path,\n        raw: file.content,\n        config,\n        baseColor,\n      })\n\n      const patch = diffLines(registryContent as string, fileContent)\n      if (patch.length > 1) {\n        changes.push({\n          filePath,\n          patch,\n        })\n      }\n    }\n  }\n\n  return changes\n}\n\nasync function printDiff(diff: Change[]) {\n  diff.forEach((part) => {\n    if (part) {\n      if (part.added) {\n        return process.stdout.write(highlighter.success(part.value))\n      }\n      if (part.removed) {\n        return process.stdout.write(highlighter.error(part.value))\n      }\n\n      return process.stdout.write(part.value)\n    }\n  })\n}\n","import { getConfig } from \"@/src/utils/get-config\"\nimport { getProjectInfo } from \"@/src/utils/get-project-info\"\nimport { handleError } from \"@/src/utils/handle-error\"\nimport { logger } from \"@/src/utils/logger\"\nimport { Command } from \"commander\"\n\nexport const info = new Command()\n  .name(\"info\")\n  .description(\"get information about your project\")\n  .option(\n    \"-c, --cwd <cwd>\",\n    \"the working directory. defaults to the current directory.\",\n    process.cwd()\n  )\n  .action(async (opts) => {\n    try {\n      logger.info(\"> project info\")\n      console.log(await getProjectInfo(opts.cwd))\n      logger.break()\n      logger.info(\"> components.json\")\n      console.log(await getConfig(opts.cwd))\n    } catch (error) {\n      handleError(error)\n    }\n  })\n","import { promises as fs } from \"fs\"\nimport path from \"path\"\nimport { server } from \"@/src/mcp\"\nimport { loadEnvFiles } from \"@/src/utils/env-loader\"\nimport { getConfig } from \"@/src/utils/get-config\"\nimport { getPackageManager } from \"@/src/utils/get-package-manager\"\nimport { handleError } from \"@/src/utils/handle-error\"\nimport { logger } from \"@/src/utils/logger\"\nimport { spinner } from \"@/src/utils/spinner\"\nimport { updateDependencies } from \"@/src/utils/updaters/update-dependencies\"\nimport { StdioServerTransport } from \"@modelcontextprotocol/sdk/server/stdio.js\"\nimport { Command } from \"commander\"\nimport deepmerge from \"deepmerge\"\nimport { execa } from \"execa\"\nimport fsExtra from \"fs-extra\"\nimport prompts from \"prompts\"\nimport z from \"zod\"\n\nconst SHADCN_MCP_VERSION = \"latest\"\n\nconst CLIENTS = [\n  {\n    name: \"claude\",\n    label: \"Claude Code\",\n    configPath: \".mcp.json\",\n    config: {\n      mcpServers: {\n        shadcn: {\n          command: \"npx\",\n          args: [`shadcn@${SHADCN_MCP_VERSION}`, \"mcp\"],\n        },\n      },\n    },\n  },\n  {\n    name: \"cursor\",\n    label: \"Cursor\",\n    configPath: \".cursor/mcp.json\",\n    config: {\n      mcpServers: {\n        shadcn: {\n          command: \"npx\",\n          args: [`shadcn@${SHADCN_MCP_VERSION}`, \"mcp\"],\n        },\n      },\n    },\n  },\n  {\n    name: \"vscode\",\n    label: \"VS Code\",\n    configPath: \".vscode/mcp.json\",\n    config: {\n      servers: {\n        shadcn: {\n          command: \"npx\",\n          args: [`shadcn@${SHADCN_MCP_VERSION}`, \"mcp\"],\n        },\n      },\n    },\n  },\n] as const\n\nconst DEPENDENCIES = [`shadcn@${SHADCN_MCP_VERSION}`]\n\nexport const mcp = new Command()\n  .name(\"mcp\")\n  .description(\"MCP server and configuration commands\")\n  .option(\n    \"-c, --cwd <cwd>\",\n    \"the working directory. defaults to the current directory.\",\n    process.cwd()\n  )\n  .action(async (options) => {\n    try {\n      await loadEnvFiles(options.cwd)\n      const transport = new StdioServerTransport()\n      await server.connect(transport)\n    } catch (error) {\n      logger.break()\n      handleError(error)\n    }\n  })\n\nconst mcpInitOptionsSchema = z.object({\n  client: z.enum([\"claude\", \"cursor\", \"vscode\"]),\n  cwd: z.string(),\n})\n\nmcp\n  .command(\"init\")\n  .description(\"Initialize MCP configuration for your client\")\n  .option(\n    \"--client <client>\",\n    `MCP client (${CLIENTS.map((c) => c.name).join(\", \")})`\n  )\n  .action(async (opts, command) => {\n    try {\n      // Get the cwd from parent command.\n      const parentOpts = command.parent?.opts() || {}\n      const cwd = parentOpts.cwd || process.cwd()\n\n      let client = opts.client\n\n      if (!client) {\n        const response = await prompts({\n          type: \"select\",\n          name: \"client\",\n          message: \"Which MCP client are you using?\",\n          choices: CLIENTS.map((c) => ({\n            title: c.label,\n            value: c.name,\n          })),\n        })\n\n        if (!response.client) {\n          logger.break()\n          process.exit(1)\n        }\n\n        client = response.client\n      }\n\n      const options = mcpInitOptionsSchema.parse({\n        client,\n        cwd,\n      })\n\n      const configSpinner = spinner(\"Configuring MCP server...\").start()\n      const configPath = await runMcpInit(options)\n      configSpinner.succeed(\"Configuring MCP server.\")\n\n      const config = await getConfig(options.cwd)\n      if (config) {\n        await updateDependencies([], DEPENDENCIES, config, {\n          silent: false,\n        })\n      } else {\n        const packageManager = await getPackageManager(options.cwd)\n        const installCommand = packageManager === \"npm\" ? \"install\" : \"add\"\n        const devFlag = packageManager === \"npm\" ? \"--save-dev\" : \"-D\"\n\n        const installSpinner = spinner(\"Installing dependencies...\").start()\n        await execa(\n          packageManager,\n          [installCommand, devFlag, ...DEPENDENCIES],\n          {\n            cwd: options.cwd,\n          }\n        )\n        installSpinner.succeed(\"Installing dependencies.\")\n      }\n\n      logger.break()\n      logger.success(`Configuration saved to ${configPath}.`)\n      logger.break()\n    } catch (error) {\n      handleError(error)\n    }\n  })\n\nconst overwriteMerge = (_: any[], sourceArray: any[]) => sourceArray\n\nasync function runMcpInit(options: z.infer<typeof mcpInitOptionsSchema>) {\n  const { client, cwd } = options\n\n  const clientInfo = CLIENTS.find((c) => c.name === client)\n  if (!clientInfo) {\n    throw new Error(\n      `Unknown client: ${client}. Available clients: ${CLIENTS.map(\n        (c) => c.name\n      ).join(\", \")}`\n    )\n  }\n\n  const configPath = path.join(cwd, clientInfo.configPath)\n\n  let existingConfig = {}\n  try {\n    const content = await fs.readFile(configPath, \"utf-8\")\n    existingConfig = JSON.parse(content)\n  } catch {}\n\n  const mergedConfig = deepmerge(\n    existingConfig,\n    clientInfo.config as Record<string, unknown>,\n    { arrayMerge: overwriteMerge }\n  )\n\n  const dir = path.dirname(configPath)\n  await fsExtra.ensureDir(dir)\n  await fs.writeFile(\n    configPath,\n    JSON.stringify(mergedConfig, null, 2) + \"\\n\",\n    \"utf-8\"\n  )\n\n  return clientInfo.configPath\n}\n","import { randomBytes } from \"crypto\"\nimport { promises as fs } from \"fs\"\nimport { tmpdir } from \"os\"\nimport path from \"path\"\nimport { getRegistryIcons } from \"@/src/registry/api\"\nimport { iconsSchema } from \"@/src/schema\"\nimport { Config } from \"@/src/utils/get-config\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { ICON_LIBRARIES } from \"@/src/utils/icon-libraries\"\nimport { logger } from \"@/src/utils/logger\"\nimport { spinner } from \"@/src/utils/spinner\"\nimport { updateDependencies } from \"@/src/utils/updaters/update-dependencies\"\nimport fg from \"fast-glob\"\nimport prompts from \"prompts\"\nimport { Project, ScriptKind, SyntaxKind } from \"ts-morph\"\nimport { z } from \"zod\"\n\nexport async function migrateIcons(config: Config) {\n  if (!config.resolvedPaths.ui) {\n    throw new Error(\n      \"We could not find a valid `ui` path in your `components.json` file. Please ensure you have a valid `ui` path in your `components.json` file.\"\n    )\n  }\n\n  const uiPath = config.resolvedPaths.ui\n  const [files, registryIcons] = await Promise.all([\n    fg(\"**/*.{js,ts,jsx,tsx}\", {\n      cwd: uiPath,\n    }),\n    getRegistryIcons(),\n  ])\n\n  if (Object.keys(registryIcons).length === 0) {\n    throw new Error(\"Something went wrong fetching the registry icons.\")\n  }\n\n  const libraryChoices = Object.entries(ICON_LIBRARIES).map(\n    ([name, iconLibrary]) => ({\n      title: iconLibrary.name,\n      value: name,\n    })\n  )\n\n  const migrateOptions = await prompts([\n    {\n      type: \"select\",\n      name: \"sourceLibrary\",\n      message: `Which icon library would you like to ${highlighter.info(\n        \"migrate from\"\n      )}?`,\n      choices: libraryChoices,\n    },\n    {\n      type: \"select\",\n      name: \"targetLibrary\",\n      message: `Which icon library would you like to ${highlighter.info(\n        \"migrate to\"\n      )}?`,\n      choices: libraryChoices,\n    },\n  ])\n\n  if (migrateOptions.sourceLibrary === migrateOptions.targetLibrary) {\n    throw new Error(\n      \"You cannot migrate to the same icon library. Please choose a different icon library.\"\n    )\n  }\n\n  if (\n    !(\n      migrateOptions.sourceLibrary in ICON_LIBRARIES &&\n      migrateOptions.targetLibrary in ICON_LIBRARIES\n    )\n  ) {\n    throw new Error(\"Invalid icon library. Please choose a valid icon library.\")\n  }\n\n  const sourceLibrary =\n    ICON_LIBRARIES[migrateOptions.sourceLibrary as keyof typeof ICON_LIBRARIES]\n  const targetLibrary =\n    ICON_LIBRARIES[migrateOptions.targetLibrary as keyof typeof ICON_LIBRARIES]\n  const { confirm } = await prompts({\n    type: \"confirm\",\n    name: \"confirm\",\n    initial: true,\n    message: `We will migrate ${highlighter.info(\n      files.length\n    )} files in ${highlighter.info(\n      `./${path.relative(config.resolvedPaths.cwd, uiPath)}`\n    )} from ${highlighter.info(sourceLibrary.name)} to ${highlighter.info(\n      targetLibrary.name\n    )}. Continue?`,\n  })\n\n  if (!confirm) {\n    logger.info(\"Migration cancelled.\")\n    process.exit(0)\n  }\n\n  if (targetLibrary.package) {\n    await updateDependencies([targetLibrary.package], [], config, {\n      silent: false,\n    })\n  }\n\n  const migrationSpinner = spinner(`Migrating icons...`)?.start()\n\n  await Promise.all(\n    files.map(async (file) => {\n      migrationSpinner.text = `Migrating ${file}...`\n\n      const filePath = path.join(uiPath, file)\n      const fileContent = await fs.readFile(filePath, \"utf-8\")\n\n      const content = await migrateIconsFile(\n        fileContent,\n        migrateOptions.sourceLibrary,\n        migrateOptions.targetLibrary,\n        registryIcons\n      )\n\n      await fs.writeFile(filePath, content)\n    })\n  )\n\n  migrationSpinner.succeed(\"Migration complete.\")\n}\n\nexport async function migrateIconsFile(\n  content: string,\n  sourceLibrary: keyof typeof ICON_LIBRARIES,\n  targetLibrary: keyof typeof ICON_LIBRARIES,\n  iconsMapping: z.infer<typeof iconsSchema>\n) {\n  const sourceLibraryImport = ICON_LIBRARIES[sourceLibrary]?.import\n  const targetLibraryImport = ICON_LIBRARIES[targetLibrary]?.import\n\n  const dir = await fs.mkdtemp(path.join(tmpdir(), \"shadcn-\"))\n  const project = new Project({\n    compilerOptions: {},\n  })\n\n  const tempFile = path.join(\n    dir,\n    `shadcn-icons-${randomBytes(4).toString(\"hex\")}.tsx`\n  )\n  const sourceFile = project.createSourceFile(tempFile, content, {\n    scriptKind: ScriptKind.TSX,\n  })\n\n  // Find all sourceLibrary imports.\n  let targetedIcons: string[] = []\n  for (const importDeclaration of sourceFile.getImportDeclarations() ?? []) {\n    if (\n      importDeclaration.getModuleSpecifier()?.getText() !==\n      `\"${sourceLibraryImport}\"`\n    ) {\n      continue\n    }\n\n    for (const specifier of importDeclaration.getNamedImports() ?? []) {\n      const iconName = specifier.getName()\n\n      // TODO: this is O(n^2) but okay for now.\n      const targetedIcon = Object.values(iconsMapping).find(\n        (icon) => icon[sourceLibrary] === iconName\n      )?.[targetLibrary]\n\n      if (!targetedIcon || targetedIcons.includes(targetedIcon)) {\n        continue\n      }\n\n      targetedIcons.push(targetedIcon)\n\n      // Remove the named import.\n      specifier.remove()\n\n      // Replace with the targeted icon.\n      sourceFile\n        .getDescendantsOfKind(SyntaxKind.JsxSelfClosingElement)\n        .filter((node) => node.getTagNameNode()?.getText() === iconName)\n        .forEach((node) => node.getTagNameNode()?.replaceWithText(targetedIcon))\n    }\n\n    // If the named import is empty, remove the import declaration.\n    if (importDeclaration.getNamedImports()?.length === 0) {\n      importDeclaration.remove()\n    }\n  }\n\n  if (targetedIcons.length > 0) {\n    sourceFile.addImportDeclaration({\n      moduleSpecifier: targetLibraryImport,\n      namedImports: targetedIcons.map((icon) => ({\n        name: icon,\n      })),\n    })\n  }\n\n  return await sourceFile.getText()\n}\n","import { promises as fs } from \"fs\"\nimport path from \"path\"\nimport { Config } from \"@/src/utils/get-config\"\nimport { getPackageInfo } from \"@/src/utils/get-package-info\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { logger } from \"@/src/utils/logger\"\nimport { spinner } from \"@/src/utils/spinner\"\nimport { updateDependencies } from \"@/src/utils/updaters/update-dependencies\"\nimport fg from \"fast-glob\"\nimport prompts from \"prompts\"\n\nfunction toPascalCase(str: string): string {\n  return str\n    .split(\"-\")\n    .map((part) => part.charAt(0).toUpperCase() + part.slice(1))\n    .join(\"\")\n}\n\nfunction processNamedImports(\n  namedImports: string,\n  isTypeOnly: boolean,\n  imports: Array<{ name: string; alias?: string; isType?: boolean }>,\n  packageName: string\n) {\n  // Clean up multi-line imports.\n  // Remove comments and whitespace.\n  const cleanedImports = namedImports\n    .replace(/\\/\\/.*$/gm, \"\")\n    .replace(/\\/\\*[\\s\\S]*?\\*\\//g, \"\")\n    .replace(/\\s+/g, \" \")\n    .trim()\n\n  const namedImportList = cleanedImports\n    .split(\",\")\n    .map((importItem) => importItem.trim())\n    .filter(Boolean)\n\n  for (const importItem of namedImportList) {\n    const inlineTypeMatch = importItem.match(/^type\\s+(\\w+)(?:\\s+as\\s+(\\w+))?$/)\n    const aliasMatch = importItem.match(/^(\\w+)\\s+as\\s+(\\w+)$/)\n\n    if (inlineTypeMatch) {\n      // Inline type: \"type DialogProps\" or \"type DialogProps as Props\"\n      const importName = inlineTypeMatch[1]\n      const importAlias = inlineTypeMatch[2]\n\n      if (packageName === \"slot\" && importName === \"Slot\" && !importAlias) {\n        imports.push({\n          name: \"Slot\",\n          alias: \"SlotPrimitive\",\n          isType: true,\n        })\n      } else {\n        imports.push({\n          name: importName,\n          alias: importAlias,\n          isType: true,\n        })\n      }\n    } else if (aliasMatch) {\n      // Regular import with alias: \"Root as DialogRoot\"\n      const importName = aliasMatch[1]\n      const importAlias = aliasMatch[2]\n\n      if (\n        packageName === \"slot\" &&\n        importName === \"Slot\" &&\n        importAlias === \"Slot\"\n      ) {\n        imports.push({\n          name: \"Slot\",\n          alias: \"SlotPrimitive\",\n          isType: isTypeOnly,\n        })\n      } else {\n        imports.push({\n          name: importName,\n          alias: importAlias,\n          isType: isTypeOnly,\n        })\n      }\n    } else {\n      // Simple import: \"Root\"\n      // Special handling for Slot: always alias it as SlotPrimitive\n      if (packageName === \"slot\" && importItem === \"Slot\") {\n        imports.push({\n          name: \"Slot\",\n          alias: \"SlotPrimitive\",\n          isType: isTypeOnly,\n        })\n      } else {\n        imports.push({\n          name: importItem,\n          isType: isTypeOnly,\n        })\n      }\n    }\n  }\n}\n\nexport async function migrateRadix(\n  config: Config,\n  options: { yes?: boolean } = {}\n) {\n  if (!config.resolvedPaths.ui) {\n    throw new Error(\n      \"We could not find a valid `ui` path in your `components.json` file. Please ensure you have a valid `ui` path in your `components.json` file.\"\n    )\n  }\n\n  const uiPath = config.resolvedPaths.ui\n  const files = await fg(\"**/*.{js,ts,jsx,tsx}\", {\n    cwd: uiPath,\n  })\n\n  if (!options.yes) {\n    const { confirm } = await prompts({\n      type: \"confirm\",\n      name: \"confirm\",\n      initial: true,\n      message: `We will migrate ${highlighter.info(\n        files.length\n      )} files in ${highlighter.info(\n        `./${path.relative(config.resolvedPaths.cwd, uiPath)}`\n      )} to ${highlighter.info(\"radix-ui\")}. Continue?`,\n    })\n\n    if (!confirm) {\n      logger.info(\"Migration cancelled.\")\n      process.exit(0)\n    }\n  }\n\n  const migrationSpinner = spinner(`Migrating imports...`)?.start()\n  const foundPackages = new Set<string>()\n\n  await Promise.all(\n    files.map(async (file) => {\n      migrationSpinner.text = `Migrating ${file}...`\n\n      const filePath = path.join(uiPath, file)\n      const fileContent = await fs.readFile(filePath, \"utf-8\")\n\n      const { content, replacedPackages } = await migrateRadixFile(fileContent)\n\n      // Track which packages we found\n      replacedPackages.forEach((pkg) => foundPackages.add(pkg))\n\n      await fs.writeFile(filePath, content)\n    })\n  )\n\n  migrationSpinner.succeed(\"Migrating imports.\")\n\n  // Update package.json dependencies\n  const packageSpinner = spinner(`Updating package.json...`)?.start()\n\n  try {\n    const packageJson = getPackageInfo(config.resolvedPaths.cwd, false)\n\n    if (!packageJson) {\n      packageSpinner.fail(\"Could not read package.json\")\n      logger.warn(\n        \"Could not update package.json. You may need to manually replace @radix-ui/react-* packages with radix-ui\"\n      )\n      return\n    }\n\n    const foundPackagesArray = Array.from(foundPackages)\n\n    // Remove packages from both dependencies and devDependencies if found in source files\n    const dependencyTypes = [\"dependencies\", \"devDependencies\"] as const\n    for (const depType of dependencyTypes) {\n      if (packageJson[depType]) {\n        for (const pkg of foundPackagesArray) {\n          if (packageJson[depType]![pkg]) {\n            delete packageJson[depType]![pkg]\n          }\n        }\n      }\n    }\n\n    // Add radix-ui if we found any Radix packages.\n    if (foundPackagesArray.length > 0) {\n      if (!packageJson.dependencies) {\n        packageJson.dependencies = {}\n      }\n      packageJson.dependencies[\"radix-ui\"] = \"latest\"\n\n      const packageJsonPath = path.join(\n        config.resolvedPaths.cwd,\n        \"package.json\"\n      )\n      await fs.writeFile(\n        packageJsonPath,\n        JSON.stringify(packageJson, null, 2) + \"\\n\"\n      )\n\n      packageSpinner.succeed(`Updated package.json.`)\n\n      // Install radix-ui dependency.\n      await updateDependencies([\"radix-ui\"], [], config, { silent: false })\n    } else {\n      packageSpinner.succeed(\"No packages found in source files.\")\n    }\n  } catch (error) {\n    packageSpinner.fail(\"Failed to update package.json\")\n    logger.warn(\n      \"You may need to manually replace @radix-ui/react-* packages with radix-ui\"\n    )\n  }\n}\n\nexport async function migrateRadixFile(\n  content: string\n): Promise<{ content: string; replacedPackages: string[] }> {\n  // Enhanced regex to handle type-only imports, but exclude react-icons\n  // Also capture optional semicolon at the end\n  const radixImportPattern =\n    /import\\s+(?:(type)\\s+)?(?:\\*\\s+as\\s+(\\w+)|{([^}]+)})\\s+from\\s+([\"'])@radix-ui\\/react-([^\"']+)\\4(;?)/g\n\n  const imports: Array<{ name: string; alias?: string; isType?: boolean }> = []\n  const linesToRemove: string[] = []\n  const replacedPackages: string[] = []\n  let quoteStyle = '\"' // Default to double quotes\n  let hasSemicolon = false // Track if any import had a semicolon\n\n  let result = content\n  let match\n\n  // Find all Radix imports\n  while ((match = radixImportPattern.exec(content)) !== null) {\n    const [\n      fullMatch,\n      typeKeyword,\n      namespaceAlias,\n      namedImports,\n      quote,\n      packageName,\n      semicolon,\n    ] = match\n\n    // Skip react-icons package and any sub-paths (like react-icons/dist/types)\n    if (packageName === \"icons\" || packageName.startsWith(\"icons/\")) {\n      continue\n    }\n\n    linesToRemove.push(fullMatch)\n\n    // Use the quote style and semicolon style from the first import\n    if (linesToRemove.length === 1) {\n      quoteStyle = quote\n      hasSemicolon = semicolon === \";\"\n    }\n\n    // Track which package we're replacing\n    replacedPackages.push(`@radix-ui/react-${packageName}`)\n\n    const isTypeOnly = Boolean(typeKeyword)\n\n    if (namespaceAlias) {\n      // Handle namespace imports: import * as DialogPrimitive from \"@radix-ui/react-dialog\"\n      const componentName = toPascalCase(packageName)\n      imports.push({\n        name: componentName,\n        alias: namespaceAlias,\n        isType: isTypeOnly,\n      })\n    } else if (namedImports) {\n      // Handle named imports: import { Root, Trigger } from \"@radix-ui/react-dialog\"\n      // or import type { DialogProps } from \"@radix-ui/react-dialog\"\n      // or import { type DialogProps, Root } from \"@radix-ui/react-dialog\"\n\n      processNamedImports(namedImports, isTypeOnly, imports, packageName)\n    }\n  }\n\n  if (imports.length === 0) {\n    return {\n      content,\n      replacedPackages: [],\n    }\n  }\n\n  // Remove duplicates.\n  // Considering name, alias, and type status.\n  const uniqueImports = imports.filter(\n    (importName, index, self) =>\n      index ===\n      self.findIndex(\n        (i) =>\n          i.name === importName.name &&\n          i.alias === importName.alias &&\n          i.isType === importName.isType\n      )\n  )\n\n  // Create the unified import with preserved quote style and type annotations\n  const importList = uniqueImports\n    .map((imp) => {\n      const typePrefix = imp.isType ? \"type \" : \"\"\n      return imp.alias\n        ? `${typePrefix}${imp.name} as ${imp.alias}`\n        : `${typePrefix}${imp.name}`\n    })\n    .join(\", \")\n\n  const unifiedImport = `import { ${importList} } from ${quoteStyle}radix-ui${quoteStyle}${\n    hasSemicolon ? \";\" : \"\"\n  }`\n\n  // Replace first import with unified import, remove the rest\n  result = linesToRemove.reduce((acc, line, index) => {\n    return acc.replace(line, index === 0 ? unifiedImport : \"\")\n  }, result)\n\n  // Clean up extra blank lines\n  result = result.replace(/\\n\\s*\\n\\s*\\n/g, \"\\n\\n\")\n\n  // Handle special case for Slot usage transformation\n  // Now that we import { Slot as SlotPrimitive }, we need to:\n  // 1. Transform: const Comp = asChild ? Slot : [ANYTHING] -> const Comp = asChild ? SlotPrimitive.Slot : [ANYTHING]\n  // 2. Transform: React.ComponentProps<typeof Slot> -> React.ComponentProps<typeof SlotPrimitive.Slot>\n  const hasSlotImport = uniqueImports.some(\n    (imp) => imp.name === \"Slot\" && imp.alias === \"SlotPrimitive\"\n  )\n\n  if (hasSlotImport) {\n    // Find all lines that are NOT import lines to avoid transforming the import statement itself\n    const lines = result.split(\"\\n\")\n    const transformedLines = lines.map((line) => {\n      // Skip import lines\n      if (line.trim().startsWith(\"import \")) {\n        return line\n      }\n\n      let transformedLine = line\n\n      // Handle all Slot references in one comprehensive pass\n      // Use placeholders to avoid double replacements\n\n      // First, mark specific patterns with placeholders\n      transformedLine = transformedLine.replace(\n        /\\b(asChild\\s*\\?\\s*)Slot(\\s*:)/g,\n        \"$1__SLOT_PLACEHOLDER__$2\"\n      )\n\n      transformedLine = transformedLine.replace(\n        /\\bReact\\.ComponentProps<typeof\\s+Slot>/g,\n        \"React.ComponentProps<typeof __SLOT_PLACEHOLDER__>\"\n      )\n\n      transformedLine = transformedLine.replace(\n        /\\bComponentProps<typeof\\s+Slot>/g,\n        \"ComponentProps<typeof __SLOT_PLACEHOLDER__>\"\n      )\n\n      transformedLine = transformedLine.replace(\n        /(<\\/?)Slot(\\s*\\/?>)/g,\n        \"$1__SLOT_PLACEHOLDER__$2\"\n      )\n\n      // Handle any other standalone Slot usage\n      transformedLine = transformedLine.replace(\n        /\\bSlot\\b/g,\n        (match, offset, string) => {\n          // Don't transform if it's inside quotes\n          const beforeMatch = string.substring(0, offset)\n          const openQuotes = (beforeMatch.match(/\"/g) || []).length\n          const openSingleQuotes = (beforeMatch.match(/'/g) || []).length\n\n          // If we're inside quotes, don't transform\n          if (openQuotes % 2 !== 0 || openSingleQuotes % 2 !== 0) {\n            return match\n          }\n\n          return \"__SLOT_PLACEHOLDER__\"\n        }\n      )\n\n      // Finally, replace all placeholders with SlotPrimitive.Slot\n      transformedLine = transformedLine.replace(\n        /__SLOT_PLACEHOLDER__/g,\n        \"SlotPrimitive.Slot\"\n      )\n\n      return transformedLine\n    })\n\n    result = transformedLines.join(\"\\n\")\n  }\n\n  // Remove duplicate packages\n  const uniqueReplacedPackages = Array.from(new Set(replacedPackages))\n\n  return {\n    content: result,\n    replacedPackages: uniqueReplacedPackages,\n  }\n}\n","import path from \"path\"\nimport { addOptionsSchema } from \"@/src/commands/add\"\nimport { migrateOptionsSchema } from \"@/src/commands/migrate\"\nimport * as ERRORS from \"@/src/utils/errors\"\nimport { getConfig } from \"@/src/utils/get-config\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { logger } from \"@/src/utils/logger\"\nimport fs from \"fs-extra\"\nimport { z } from \"zod\"\n\nexport async function preFlightMigrate(\n  options: z.infer<typeof migrateOptionsSchema>\n) {\n  const errors: Record<string, boolean> = {}\n\n  // Ensure target directory exists.\n  // Check for empty project. We assume if no package.json exists, the project is empty.\n  if (\n    !fs.existsSync(options.cwd) ||\n    !fs.existsSync(path.resolve(options.cwd, \"package.json\"))\n  ) {\n    errors[ERRORS.MISSING_DIR_OR_EMPTY_PROJECT] = true\n    return {\n      errors,\n      config: null,\n    }\n  }\n\n  // Check for existing components.json file.\n  if (!fs.existsSync(path.resolve(options.cwd, \"components.json\"))) {\n    errors[ERRORS.MISSING_CONFIG] = true\n    return {\n      errors,\n      config: null,\n    }\n  }\n\n  try {\n    const config = await getConfig(options.cwd)\n\n    return {\n      errors,\n      config: config!,\n    }\n  } catch (error) {\n    logger.break()\n    logger.error(\n      `An invalid ${highlighter.info(\n        \"components.json\"\n      )} file was found at ${highlighter.info(\n        options.cwd\n      )}.\\nBefore you can run a migration, you must create a valid ${highlighter.info(\n        \"components.json\"\n      )} file by running the ${highlighter.info(\"init\")} command.`\n    )\n    logger.error(\n      `Learn more at ${highlighter.info(\n        \"https://ui.shadcn.com/docs/components-json\"\n      )}.`\n    )\n    logger.break()\n    process.exit(1)\n  }\n}\n","import path from \"path\"\nimport { migrateIcons } from \"@/src/migrations/migrate-icons\"\nimport { migrateRadix } from \"@/src/migrations/migrate-radix\"\nimport { preFlightMigrate } from \"@/src/preflights/preflight-migrate\"\nimport * as ERRORS from \"@/src/utils/errors\"\nimport { handleError } from \"@/src/utils/handle-error\"\nimport { logger } from \"@/src/utils/logger\"\nimport { Command } from \"commander\"\nimport { z } from \"zod\"\n\nexport const migrations = [\n  {\n    name: \"icons\",\n    description: \"migrate your ui components to a different icon library.\",\n  },\n  {\n    name: \"radix\",\n    description: \"migrate to radix-ui.\",\n  },\n] as const\n\nexport const migrateOptionsSchema = z.object({\n  cwd: z.string(),\n  list: z.boolean(),\n  yes: z.boolean(),\n  migration: z\n    .string()\n    .refine(\n      (value) =>\n        value && migrations.some((migration) => migration.name === value),\n      {\n        message:\n          \"You must specify a valid migration. Run `shadcn migrate --list` to see available migrations.\",\n      }\n    )\n    .optional(),\n})\n\nexport const migrate = new Command()\n  .name(\"migrate\")\n  .description(\"run a migration.\")\n  .argument(\"[migration]\", \"the migration to run.\")\n  .option(\n    \"-c, --cwd <cwd>\",\n    \"the working directory. defaults to the current directory.\",\n    process.cwd()\n  )\n  .option(\"-l, --list\", \"list all migrations.\", false)\n  .option(\"-y, --yes\", \"skip confirmation prompt.\", false)\n  .action(async (migration, opts) => {\n    try {\n      const options = migrateOptionsSchema.parse({\n        cwd: path.resolve(opts.cwd),\n        migration,\n        list: opts.list,\n        yes: opts.yes,\n      })\n\n      if (options.list || !options.migration) {\n        logger.info(\"Available migrations:\")\n        for (const migration of migrations) {\n          logger.info(`- ${migration.name}: ${migration.description}`)\n        }\n        return\n      }\n\n      if (!options.migration) {\n        throw new Error(\n          \"You must specify a migration. Run `shadcn migrate --list` to see available migrations.\"\n        )\n      }\n\n      let { errors, config } = await preFlightMigrate(options)\n\n      if (\n        errors[ERRORS.MISSING_DIR_OR_EMPTY_PROJECT] ||\n        errors[ERRORS.MISSING_CONFIG]\n      ) {\n        throw new Error(\n          \"No `components.json` file found. Ensure you are at the root of your project.\"\n        )\n      }\n\n      if (!config) {\n        throw new Error(\n          \"Something went wrong reading your `components.json` file. Please ensure you have a valid `components.json` file.\"\n        )\n      }\n\n      if (options.migration === \"icons\") {\n        await migrateIcons(config)\n      }\n\n      if (options.migration === \"radix\") {\n        await migrateRadix(config, { yes: options.yes })\n      }\n    } catch (error) {\n      logger.break()\n      handleError(error)\n    }\n  })\n","import path from \"path\"\nimport { buildOptionsSchema } from \"@/src/commands/build\"\nimport * as ERRORS from \"@/src/utils/errors\"\nimport { getConfig } from \"@/src/utils/get-config\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { logger } from \"@/src/utils/logger\"\nimport fs from \"fs-extra\"\nimport { z } from \"zod\"\n\nexport async function preFlightRegistryBuild(\n  options: z.infer<typeof buildOptionsSchema>\n) {\n  const errors: Record<string, boolean> = {}\n\n  const resolvePaths = {\n    cwd: options.cwd,\n    registryFile: path.resolve(options.cwd, options.registryFile),\n    outputDir: path.resolve(options.cwd, options.outputDir),\n  }\n\n  // Ensure registry file exists.\n  if (!fs.existsSync(resolvePaths.registryFile)) {\n    errors[ERRORS.BUILD_MISSING_REGISTRY_FILE] = true\n    return {\n      errors,\n      resolvePaths: null,\n      config: null,\n    }\n  }\n\n  // Check for existing components.json file.\n  if (!fs.existsSync(path.resolve(options.cwd, \"components.json\"))) {\n    errors[ERRORS.MISSING_CONFIG] = true\n    return {\n      errors,\n      resolvePaths: null,\n      config: null,\n    }\n  }\n\n  // Create output directory if it doesn't exist.\n  await fs.mkdir(resolvePaths.outputDir, { recursive: true })\n\n  try {\n    const config = await getConfig(options.cwd)\n\n    return {\n      errors,\n      config: config!,\n      resolvePaths,\n    }\n  } catch (error) {\n    logger.break()\n    logger.error(\n      `An invalid ${highlighter.info(\n        \"components.json\"\n      )} file was found at ${highlighter.info(\n        options.cwd\n      )}.\\nBefore you can build the registry, you must create a valid ${highlighter.info(\n        \"components.json\"\n      )} file by running the ${highlighter.info(\"init\")} command.`\n    )\n    logger.break()\n    process.exit(1)\n  }\n}\n","import * as fs from \"fs/promises\"\nimport * as path from \"path\"\nimport { preFlightRegistryBuild } from \"@/src/preflights/preflight-registry\"\nimport { recursivelyResolveFileImports } from \"@/src/registry/utils\"\nimport { configSchema, registryItemSchema, registrySchema } from \"@/src/schema\"\nimport * as ERRORS from \"@/src/utils/errors\"\nimport { ProjectInfo, getProjectInfo } from \"@/src/utils/get-project-info\"\nimport { handleError } from \"@/src/utils/handle-error\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { logger } from \"@/src/utils/logger\"\nimport { spinner } from \"@/src/utils/spinner\"\nimport { Command } from \"commander\"\nimport { z } from \"zod\"\n\nexport const buildOptionsSchema = z.object({\n  cwd: z.string(),\n  registryFile: z.string(),\n  outputDir: z.string(),\n  verbose: z.boolean().optional().default(false),\n})\n\nexport const build = new Command()\n  .name(\"registry:build\")\n  .description(\"builds the registry [EXPERIMENTAL]\")\n  .argument(\"[registry]\", \"path to registry.json file\", \"./registry.json\")\n  .option(\n    \"-o, --output <path>\",\n    \"destination directory for json files\",\n    \"./public/r\"\n  )\n  .option(\n    \"-c, --cwd <cwd>\",\n    \"the working directory. defaults to the current directory.\",\n    process.cwd()\n  )\n  .option(\"-v, --verbose\", \"verbose output\")\n  .action(async (registry: string, opts) => {\n    await buildRegistry({\n      cwd: path.resolve(opts.cwd),\n      registryFile: registry,\n      outputDir: opts.output,\n      verbose: opts.verbose,\n    })\n  })\n\nasync function buildRegistry(opts: z.infer<typeof buildOptionsSchema>) {\n  try {\n    const options = buildOptionsSchema.parse(opts)\n\n    const [{ errors, resolvePaths, config }, projectInfo] = await Promise.all([\n      preFlightRegistryBuild(options),\n      getProjectInfo(options.cwd),\n    ])\n\n    if (errors[ERRORS.MISSING_CONFIG] || !config || !projectInfo) {\n      logger.error(\n        `A ${highlighter.info(\n          \"components.json\"\n        )} file is required to build the registry. Run ${highlighter.info(\n          \"shadcn init\"\n        )} to create one.`\n      )\n      logger.break()\n      process.exit(1)\n    }\n\n    if (errors[ERRORS.BUILD_MISSING_REGISTRY_FILE] || !resolvePaths) {\n      logger.error(\n        `We could not find a registry file at ${highlighter.info(\n          path.resolve(options.cwd, options.registryFile)\n        )}.`\n      )\n      logger.break()\n      process.exit(1)\n    }\n\n    const content = await fs.readFile(resolvePaths.registryFile, \"utf-8\")\n    const result = registrySchema.safeParse(JSON.parse(content))\n\n    if (!result.success) {\n      logger.error(\n        `Invalid registry file found at ${highlighter.info(\n          resolvePaths.registryFile\n        )}.`\n      )\n      logger.break()\n      process.exit(1)\n    }\n\n    const buildSpinner = spinner(\"Building registry...\")\n\n    // Recursively resolve the registry items.\n    const resolvedRegistry = await resolveRegistryItems(\n      result.data,\n      config,\n      projectInfo\n    )\n\n    // Loop through the registry items and remove duplicates files i.e same path.\n    for (const registryItem of resolvedRegistry.items) {\n      // Deduplicate files\n      registryItem.files = registryItem.files?.filter(\n        (file, index, self) =>\n          index === self.findIndex((t) => t.path === file.path)\n      )\n\n      // Deduplicate dependencies\n      if (registryItem.dependencies) {\n        registryItem.dependencies = registryItem.dependencies.filter(\n          (dep, index, self) => index === self.findIndex((d) => d === dep)\n        )\n      }\n    }\n\n    for (const registryItem of resolvedRegistry.items) {\n      if (!registryItem.files) {\n        continue\n      }\n\n      buildSpinner.start(`Building ${registryItem.name}...`)\n\n      // Add the schema to the registry item.\n      registryItem[\"$schema\"] =\n        \"https://ui.shadcn.com/schema/registry-item.json\"\n\n      for (const file of registryItem.files) {\n        const absPath = path.resolve(resolvePaths.cwd, file.path)\n        try {\n          const stat = await fs.stat(absPath)\n          if (!stat.isFile()) {\n            continue\n          }\n          file[\"content\"] = await fs.readFile(absPath, \"utf-8\")\n        } catch (err) {\n          console.error(\"Error reading file in registry build:\", absPath, err)\n          continue\n        }\n      }\n\n      const result = registryItemSchema.safeParse(registryItem)\n      if (!result.success) {\n        logger.error(\n          `Invalid registry item found for ${highlighter.info(\n            registryItem.name\n          )}.`\n        )\n        continue\n      }\n\n      // Write the registry item to the output directory.\n      await fs.writeFile(\n        path.resolve(resolvePaths.outputDir, `${result.data.name}.json`),\n        JSON.stringify(result.data, null, 2)\n      )\n    }\n\n    // Copy registry.json to the output directory.\n    await fs.copyFile(\n      resolvePaths.registryFile,\n      path.resolve(resolvePaths.outputDir, \"registry.json\")\n    )\n\n    buildSpinner.succeed(\"Building registry.\")\n\n    if (options.verbose) {\n      spinner(\n        `The registry has ${highlighter.info(\n          resolvedRegistry.items.length.toString()\n        )} items:`\n      ).succeed()\n      for (const item of resolvedRegistry.items) {\n        logger.log(`  - ${item.name} (${highlighter.info(item.type)})`)\n        for (const file of item.files ?? []) {\n          logger.log(`    - ${file.path}`)\n        }\n      }\n    }\n  } catch (error) {\n    logger.break()\n    handleError(error)\n  }\n}\n\n// This reads the registry and recursively resolves the file imports.\nasync function resolveRegistryItems(\n  registry: z.infer<typeof registrySchema>,\n  config: z.infer<typeof configSchema>,\n  projectInfo: ProjectInfo\n): Promise<z.infer<typeof registrySchema>> {\n  for (const item of registry.items) {\n    if (!item.files?.length) {\n      continue\n    }\n\n    // Process all files in the array instead of just the first one\n    for (const file of item.files) {\n      const results = await recursivelyResolveFileImports(\n        file.path,\n        config,\n        projectInfo\n      )\n\n      // Remove file from results.files\n      results.files = results.files?.filter((f) => f.path !== file.path)\n\n      if (results.files) {\n        item.files.push(...results.files)\n      }\n\n      if (results.dependencies) {\n        item.dependencies = item.dependencies\n          ? item.dependencies.concat(results.dependencies)\n          : results.dependencies\n      }\n    }\n  }\n\n  return registry\n}\n","import { highlighter } from \"@/src/utils/highlighter\"\nimport { logger } from \"@/src/utils/logger\"\nimport { Command } from \"commander\"\n\nexport const mcp = new Command()\n  .name(\"registry:mcp\")\n  .description(\"starts the registry MCP server [DEPRECATED]\")\n  .option(\n    \"-c, --cwd <cwd>\",\n    \"the working directory. defaults to the current directory.\",\n    process.cwd()\n  )\n  .action(async () => {\n    logger.warn(\n      `The ${highlighter.info(\n        \"shadcn registry:mcp\"\n      )} command is deprecated. Use the ${highlighter.info(\n        \"shadcn mcp\"\n      )} command instead.`\n    )\n    logger.break()\n  })\n","import path from \"path\"\nimport { configWithDefaults } from \"@/src/registry/config\"\nimport { clearRegistryContext } from \"@/src/registry/context\"\nimport { searchRegistries } from \"@/src/registry/search\"\nimport { validateRegistryConfigForItems } from \"@/src/registry/validator\"\nimport { rawConfigSchema } from \"@/src/schema\"\nimport { loadEnvFiles } from \"@/src/utils/env-loader\"\nimport { createConfig, getConfig } from \"@/src/utils/get-config\"\nimport { handleError } from \"@/src/utils/handle-error\"\nimport { Command } from \"commander\"\nimport fsExtra from \"fs-extra\"\nimport { z } from \"zod\"\n\nconst searchOptionsSchema = z.object({\n  cwd: z.string(),\n  query: z.string().optional(),\n  limit: z.number().optional(),\n  offset: z.number().optional(),\n})\n\n// TODO: We're duplicating logic for shadowConfig here.\n// Revisit and properly abstract this.\n\nexport const search = new Command()\n  .name(\"search\")\n  .alias(\"list\")\n  .description(\"search items from registries\")\n  .argument(\n    \"<registries...>\",\n    \"the registry names or urls to search items from. Names must be prefixed with @.\"\n  )\n  .option(\n    \"-c, --cwd <cwd>\",\n    \"the working directory. defaults to the current directory.\",\n    process.cwd()\n  )\n  .option(\"-q, --query <query>\", \"query string\")\n  .option(\n    \"-l, --limit <number>\",\n    \"maximum number of items to display per registry\",\n    \"100\"\n  )\n  .option(\"-o, --offset <number>\", \"number of items to skip\", \"0\")\n  .action(async (registries: string[], opts) => {\n    try {\n      const options = searchOptionsSchema.parse({\n        cwd: path.resolve(opts.cwd),\n        query: opts.query,\n        limit: opts.limit ? parseInt(opts.limit, 10) : undefined,\n        offset: opts.offset ? parseInt(opts.offset, 10) : undefined,\n      })\n\n      await loadEnvFiles(options.cwd)\n\n      // Start with a shadow config to support partial components.json.\n      // Use createConfig to get proper default paths\n      const defaultConfig = createConfig({\n        style: \"new-york\",\n        resolvedPaths: {\n          cwd: options.cwd,\n        },\n      })\n      let shadowConfig = configWithDefaults(defaultConfig)\n\n      // Check if there's a components.json file (partial or complete).\n      const componentsJsonPath = path.resolve(options.cwd, \"components.json\")\n      if (fsExtra.existsSync(componentsJsonPath)) {\n        const existingConfig = await fsExtra.readJson(componentsJsonPath)\n        const partialConfig = rawConfigSchema.partial().parse(existingConfig)\n        shadowConfig = configWithDefaults({\n          ...defaultConfig,\n          ...partialConfig,\n        })\n      }\n\n      // Try to get the full config, but fall back to shadow config if it fails.\n      let config = shadowConfig\n      try {\n        const fullConfig = await getConfig(options.cwd)\n        if (fullConfig) {\n          config = configWithDefaults(fullConfig)\n        }\n      } catch {\n        // Use shadow config if getConfig fails (partial components.json).\n      }\n\n      // Validate registries early for better error messages.\n      validateRegistryConfigForItems(registries, config)\n\n      // Use searchRegistries for both search and non-search cases\n      const results = await searchRegistries(registries as `@${string}`[], {\n        query: options.query,\n        limit: options.limit,\n        offset: options.offset,\n        config,\n      })\n\n      console.log(JSON.stringify(results, null, 2))\n      process.exit(0)\n    } catch (error) {\n      handleError(error)\n    } finally {\n      clearRegistryContext()\n    }\n  })\n","import path from \"path\"\nimport { getRegistryItems } from \"@/src/registry/api\"\nimport { configWithDefaults } from \"@/src/registry/config\"\nimport { clearRegistryContext } from \"@/src/registry/context\"\nimport { validateRegistryConfigForItems } from \"@/src/registry/validator\"\nimport { rawConfigSchema } from \"@/src/schema\"\nimport { loadEnvFiles } from \"@/src/utils/env-loader\"\nimport { getConfig } from \"@/src/utils/get-config\"\nimport { handleError } from \"@/src/utils/handle-error\"\nimport { Command } from \"commander\"\nimport fsExtra from \"fs-extra\"\nimport { z } from \"zod\"\n\nconst viewOptionsSchema = z.object({\n  cwd: z.string(),\n})\n\nexport const view = new Command()\n  .name(\"view\")\n  .description(\"view items from the registry\")\n  .argument(\"<items...>\", \"the item names or URLs to view\")\n  .option(\n    \"-c, --cwd <cwd>\",\n    \"the working directory. defaults to the current directory.\",\n    process.cwd()\n  )\n  .action(async (items: string[], opts) => {\n    try {\n      const options = viewOptionsSchema.parse({\n        cwd: path.resolve(opts.cwd),\n      })\n\n      await loadEnvFiles(options.cwd)\n\n      // Start with a shadow config to support partial components.json.\n      let shadowConfig = configWithDefaults({})\n\n      // Check if there's a components.json file (partial or complete).\n      const componentsJsonPath = path.resolve(options.cwd, \"components.json\")\n      if (fsExtra.existsSync(componentsJsonPath)) {\n        const existingConfig = await fsExtra.readJson(componentsJsonPath)\n        const partialConfig = rawConfigSchema.partial().parse(existingConfig)\n        shadowConfig = configWithDefaults(partialConfig)\n      }\n\n      // Try to get the full config, but fall back to shadow config if it fails.\n      let config = shadowConfig\n      try {\n        const fullConfig = await getConfig(options.cwd)\n        if (fullConfig) {\n          config = configWithDefaults(fullConfig)\n        }\n      } catch {\n        // Use shadow config if getConfig fails (partial components.json).\n      }\n\n      // Validate registries early for better error messages.\n      validateRegistryConfigForItems(items, config)\n\n      const payload = await getRegistryItems(items, { config })\n      console.log(JSON.stringify(payload, null, 2))\n      process.exit(0)\n    } catch (error) {\n      handleError(error)\n    } finally {\n      clearRegistryContext()\n    }\n  })\n","{\n  \"name\": \"shadcn\",\n  \"version\": \"3.0.0\",\n  \"description\": \"Add components to your apps.\",\n  \"publishConfig\": {\n    \"access\": \"public\"\n  },\n  \"license\": \"MIT\",\n  \"author\": {\n    \"name\": \"shadcn\",\n    \"url\": \"https://twitter.com/shadcn\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"https://github.com/shadcn/ui.git\",\n    \"directory\": \"packages/shadcn\"\n  },\n  \"files\": [\n    \"dist\"\n  ],\n  \"keywords\": [\n    \"components\",\n    \"ui\",\n    \"tailwind\",\n    \"radix-ui\",\n    \"shadcn\"\n  ],\n  \"type\": \"module\",\n  \"exports\": {\n    \".\": {\n      \"types\": \"./dist/index.d.ts\",\n      \"default\": \"./dist/index.js\"\n    },\n    \"./registry\": {\n      \"types\": \"./dist/registry/index.d.ts\",\n      \"default\": \"./dist/registry/index.js\"\n    },\n    \"./schema\": {\n      \"types\": \"./dist/schema/index.d.ts\",\n      \"default\": \"./dist/schema/index.js\"\n    },\n    \"./mcp\": {\n      \"types\": \"./dist/mcp/index.d.ts\",\n      \"default\": \"./dist/mcp/index.js\"\n    }\n  },\n  \"bin\": \"./dist/index.js\",\n  \"scripts\": {\n    \"dev\": \"tsup --watch\",\n    \"build\": \"tsup\",\n    \"typecheck\": \"tsc --noEmit\",\n    \"clean\": \"rimraf dist && rimraf components\",\n    \"start:dev\": \"cross-env REGISTRY_URL=http://localhost:4000/r node dist/index.js\",\n    \"start:prod\": \"cross-env REGISTRY_URL=https://ui.shadcn.com/r node dist/index.js\",\n    \"start\": \"node dist/index.js\",\n    \"format:write\": \"prettier --write \\\"**/*.{ts,tsx,mdx}\\\" --cache\",\n    \"format:check\": \"prettier --check \\\"**/*.{ts,tsx,mdx}\\\" --cache\",\n    \"release\": \"changeset version\",\n    \"pub:beta\": \"pnpm build && pnpm publish --no-git-checks --access public --tag beta\",\n    \"pub:next\": \"pnpm build && pnpm publish --no-git-checks --access public --tag next\",\n    \"pub:release\": \"pnpm build && pnpm publish --access public\",\n    \"test\": \"vitest run\",\n    \"test:dev\": \"REGISTRY_URL=http://localhost:4000/r vitest run\",\n    \"mcp:inspect\": \"pnpm dlx @modelcontextprotocol/inspector node dist/index.js mcp\"\n  },\n  \"dependencies\": {\n    \"@antfu/ni\": \"^25.0.0\",\n    \"@babel/core\": \"^7.28.0\",\n    \"@babel/parser\": \"^7.28.0\",\n    \"@babel/plugin-transform-typescript\": \"^7.28.0\",\n    \"@dotenvx/dotenvx\": \"^1.48.4\",\n    \"@modelcontextprotocol/sdk\": \"^1.17.2\",\n    \"commander\": \"^14.0.0\",\n    \"cosmiconfig\": \"^9.0.0\",\n    \"dedent\": \"^1.6.0\",\n    \"deepmerge\": \"^4.3.1\",\n    \"diff\": \"^8.0.2\",\n    \"execa\": \"^9.6.0\",\n    \"fast-glob\": \"^3.3.3\",\n    \"fs-extra\": \"^11.3.1\",\n    \"fuzzysort\": \"^3.1.0\",\n    \"https-proxy-agent\": \"^7.0.6\",\n    \"kleur\": \"^4.1.5\",\n    \"msw\": \"^2.10.4\",\n    \"node-fetch\": \"^3.3.2\",\n    \"ora\": \"^8.2.0\",\n    \"postcss\": \"^8.5.6\",\n    \"prompts\": \"^2.4.2\",\n    \"recast\": \"^0.23.11\",\n    \"stringify-object\": \"^5.0.0\",\n    \"ts-morph\": \"^26.0.0\",\n    \"tsconfig-paths\": \"^4.2.0\",\n    \"zod\": \"^3.24.1\",\n    \"zod-to-json-schema\": \"^3.24.6\"\n  },\n  \"devDependencies\": {\n    \"@types/babel__core\": \"^7.20.5\",\n    \"@types/fs-extra\": \"^11.0.4\",\n    \"@types/prompts\": \"^2.4.9\",\n    \"@types/stringify-object\": \"^4.0.5\",\n    \"rimraf\": \"^6.0.1\",\n    \"tsup\": \"^8.5.0\",\n    \"type-fest\": \"^4.41.0\",\n    \"typescript\": \"^5.9.2\"\n  }\n}\n","#!/usr/bin/env node\nimport { add } from \"@/src/commands/add\"\nimport { build } from \"@/src/commands/build\"\nimport { diff } from \"@/src/commands/diff\"\nimport { info } from \"@/src/commands/info\"\nimport { init } from \"@/src/commands/init\"\nimport { mcp } from \"@/src/commands/mcp\"\nimport { migrate } from \"@/src/commands/migrate\"\nimport { build as registryBuild } from \"@/src/commands/registry/build\"\nimport { mcp as registryMcp } from \"@/src/commands/registry/mcp\"\nimport { search } from \"@/src/commands/search\"\nimport { view } from \"@/src/commands/view\"\nimport { Command } from \"commander\"\n\nimport packageJson from \"../package.json\"\n\nprocess.on(\"SIGINT\", () => process.exit(0))\nprocess.on(\"SIGTERM\", () => process.exit(0))\n\nasync function main() {\n  const program = new Command()\n    .name(\"shadcn\")\n    .description(\"add items from registries to your project\")\n    .version(\n      packageJson.version || \"1.0.0\",\n      \"-v, --version\",\n      \"display the version number\"\n    )\n\n  program\n    .addCommand(init)\n    .addCommand(add)\n    .addCommand(diff)\n    .addCommand(view)\n    .addCommand(search)\n    .addCommand(migrate)\n    .addCommand(info)\n    .addCommand(build)\n    .addCommand(mcp)\n  // Registry commands\n  program.addCommand(registryBuild).addCommand(registryMcp)\n\n  program.parse()\n}\n\nmain()\n\nexport * from \"./registry/api\"\n"]}